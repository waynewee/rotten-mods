{"ast":null,"code":"var _jsxFileName = \"/Users/ChesterSim/Desktop/NUS Computer Science/CS3219/cs3219-ay2021-s1-project-2020-s1-g01/frontend/pages/search.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport moduleApi from \"../api/module\";\nimport ModuleCompareModal from \"../components/ModuleCompareModal\";\nimport SectionTitle from \"../components/SectionTitle\";\nimport SearchModuleList from \"../components/SearchModuleList\";\nimport SeeMoreButton from \"../components/SeeMoreButton\";\nimport { descriptionGreen } from \"../styles/colors\";\nimport { AutoComplete, Checkbox, InputNumber } from \"antd\";\nconst SEARCH_INTERVAL = 5;\n\nconst Search = ({\n  initialSearchResults = []\n}) => {\n  const allSchools = useSelector(state => state.schools);\n  const schoolOfUser = useSelector(state => state.auth.user.schoolName);\n  const schoolsAutocompleteOptions = allSchools.map(school => ({\n    value: school.name\n  }));\n  const searchTerm = useSelector(state => state.search.searchTerm);\n  const {\n    0: searchResults,\n    1: setSearchResults\n  } = useState(initialSearchResults);\n  const {\n    0: numberOfResults,\n    1: setNumberOfResults\n  } = useState(SEARCH_INTERVAL + 1); // the presence of that n + 1th result is an indicator that there are more than 10 results\n\n  const {\n    0: schoolFilter,\n    1: setSchoolFilter\n  } = useState(schoolOfUser);\n  const {\n    0: schoolOptions,\n    1: setSchoolOptions\n  } = useState(schoolsAutocompleteOptions);\n  const {\n    0: semestersFilter,\n    1: setSemestersFilter\n  } = useState([]);\n  const {\n    0: creditsFilter,\n    1: setCreditsFilter\n  } = useState(\"\");\n  useEffect(() => {\n    setNumberOfResults(SEARCH_INTERVAL + 1);\n  }, [searchTerm, schoolFilter, semestersFilter, creditsFilter]);\n  useEffect(() => {\n    fetchSearchResults();\n  }, [schoolFilter, semestersFilter, creditsFilter]);\n  useEffect(() => {\n    setSchoolFilter(schoolOfUser);\n  }, [schoolOfUser]);\n  useEffect(() => {\n    setSearchResults(initialSearchResults);\n  }, [initialSearchResults]);\n\n  const fetchSearchResults = async () => {\n    var _allSchools$find;\n\n    const schoolNameFilter = (_allSchools$find = allSchools.find(school => school.name === schoolFilter)) === null || _allSchools$find === void 0 ? void 0 : _allSchools$find._id;\n    const results = await moduleApi.searchModule(searchTerm, numberOfResults, 1, schoolNameFilter, semestersFilter, creditsFilter);\n    setSearchResults(results);\n  };\n\n  const fetchMoreSearchResults = async () => {\n    const results = await moduleApi.searchModule(searchTerm, numberOfResults + SEARCH_INTERVAL);\n    console.log(results);\n    setSearchResults(results);\n    setNumberOfResults(numberOfResults + SEARCH_INTERVAL);\n  };\n\n  const semesterOptions = [{\n    label: 1,\n    value: 1\n  }, {\n    label: 2,\n    value: 2\n  }, {\n    label: 3,\n    value: 3\n  }];\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, `Search results for \"${searchTerm}\"`), __jsx(\"div\", {\n    style: styles.filterBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"School:\"), __jsx(AutoComplete, {\n    style: styles.autocomplete,\n    onSelect: setSchoolFilter,\n    options: schoolOptions,\n    value: schoolFilter,\n    onSearch: searchText => setSchoolOptions(schoolsAutocompleteOptions.filter(school => school.value.toLowerCase().includes(searchText.toLowerCase()))),\n    onChange: value => setSchoolFilter(value),\n    notFoundContent: \"The school you are looking for isn't here. Perhaps you can add them to the app!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, \"Semester:\"), __jsx(\"div\", {\n    style: styles.checkboxes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(Checkbox.Group, {\n    options: semesterOptions,\n    onChange: setSemestersFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, \"Credits:\"), __jsx(InputNumber, {\n    max: 12,\n    onChange: value => setCreditsFilter(value),\n    style: styles.creditsInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  })))), __jsx(SearchModuleList, {\n    modules: searchResults.slice(0, numberOfResults - 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }), searchResults.length == numberOfResults && __jsx(SeeMoreButton, {\n    fetchMoreData: fetchMoreSearchResults,\n    style: {\n      backgroundColor: descriptionGreen\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }), __jsx(SectionTitle, {\n    title: `Similar results to \"${searchTerm}\"`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }), __jsx(SearchModuleList, {\n    modules: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }), __jsx(ModuleCompareModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst styles = {\n  header: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    height: \"8vh\",\n    fontSize: \"1.5em\",\n    color: \"#838383\",\n    fontFamily: \"Mukta\",\n    paddingLeft: 20,\n    margin: \"20px 0px\"\n  },\n  filterBar: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    fontSize: 15,\n    alignItems: \"center\"\n  },\n  autocomplete: {\n    width: 300,\n    margin: \"0px 10px\",\n    position: \"relative\" // bottom: 2,\n\n  },\n  checkboxes: {\n    margin: \"0px 10px\",\n    position: \"relative\" // bottom: 2,\n\n  },\n  creditsInput: {\n    marginLeft: 10,\n    position: \"relative\" // bottom: 2,\n\n  }\n};\n\nSearch.getInitialProps = async ({\n  query\n}) => {\n  const searchTerm = query.s;\n\n  try {\n    const initialSearchResults = await moduleApi.searchModule(searchTerm, SEARCH_INTERVAL + 1);\n    return {\n      initialSearchResults\n    };\n  } catch (err) {\n    return {\n      initialSearchResults: []\n    };\n  }\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/ChesterSim/Desktop/NUS Computer Science/CS3219/cs3219-ay2021-s1-project-2020-s1-g01/frontend/pages/search.tsx"],"names":["useState","useEffect","useSelector","moduleApi","ModuleCompareModal","SectionTitle","SearchModuleList","SeeMoreButton","descriptionGreen","AutoComplete","Checkbox","InputNumber","SEARCH_INTERVAL","Search","initialSearchResults","allSchools","state","schools","schoolOfUser","auth","user","schoolName","schoolsAutocompleteOptions","map","school","value","name","searchTerm","search","searchResults","setSearchResults","numberOfResults","setNumberOfResults","schoolFilter","setSchoolFilter","schoolOptions","setSchoolOptions","semestersFilter","setSemestersFilter","creditsFilter","setCreditsFilter","fetchSearchResults","schoolNameFilter","find","_id","results","searchModule","fetchMoreSearchResults","console","log","semesterOptions","label","styles","header","filterBar","autocomplete","searchText","filter","toLowerCase","includes","display","checkboxes","creditsInput","slice","length","backgroundColor","width","justifyContent","alignItems","height","fontSize","color","fontFamily","paddingLeft","margin","position","marginLeft","getInitialProps","query","s","err"],"mappings":"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","sourcesContent":["import { NextPage } from \"next\";\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport moduleApi from \"../api/module\";\nimport { Module } from \"../types\";\n\nimport ModuleCompareModal from \"../components/ModuleCompareModal\";\nimport SectionTitle from \"../components/SectionTitle\";\nimport SearchModuleList from \"../components/SearchModuleList\";\nimport SeeMoreButton from \"../components/SeeMoreButton\";\nimport { descriptionGreen } from \"../styles/colors\";\nimport { AutoComplete, Checkbox, InputNumber } from \"antd\";\n\ninterface SearchProps {\n  initialSearchResults: Module[];\n}\n\nconst SEARCH_INTERVAL = 5;\n\nconst Search: NextPage<SearchProps> = ({ initialSearchResults = [] }) => {\n  const allSchools = useSelector((state) => state.schools);\n  const schoolOfUser = useSelector((state) => state.auth.user.schoolName);\n  const schoolsAutocompleteOptions = allSchools.map((school) => ({\n    value: school.name,\n  }));\n  const searchTerm = useSelector((state) => state.search.searchTerm);\n\n  const [searchResults, setSearchResults] = useState(initialSearchResults);\n  const [numberOfResults, setNumberOfResults] = useState(SEARCH_INTERVAL + 1); // the presence of that n + 1th result is an indicator that there are more than 10 results\n  const [schoolFilter, setSchoolFilter] = useState(schoolOfUser);\n  const [schoolOptions, setSchoolOptions] = useState(\n    schoolsAutocompleteOptions\n  );\n  const [semestersFilter, setSemestersFilter] = useState([]);\n  const [creditsFilter, setCreditsFilter] = useState(\"\");\n\n  useEffect(() => {\n    setNumberOfResults(SEARCH_INTERVAL + 1);\n  }, [searchTerm, schoolFilter, semestersFilter, creditsFilter]);\n\n  useEffect(() => {\n    fetchSearchResults();\n  }, [schoolFilter, semestersFilter, creditsFilter]);\n\n  useEffect(() => {\n    setSchoolFilter(schoolOfUser);\n  }, [schoolOfUser]);\n\n  useEffect(() => {\n    setSearchResults(initialSearchResults);\n  }, [initialSearchResults]);\n\n  const fetchSearchResults = async () => {\n    const schoolNameFilter = allSchools.find(\n      (school) => school.name === schoolFilter\n    )?._id;\n    const results = await moduleApi.searchModule(\n      searchTerm,\n      numberOfResults,\n      1,\n      schoolNameFilter,\n      semestersFilter,\n      creditsFilter\n    );\n    setSearchResults(results);\n  };\n\n  const fetchMoreSearchResults = async () => {\n    const results = await moduleApi.searchModule(\n      searchTerm,\n      numberOfResults + SEARCH_INTERVAL\n    );\n    console.log(results);\n    setSearchResults(results);\n    setNumberOfResults(numberOfResults + SEARCH_INTERVAL);\n  };\n\n  const semesterOptions = [\n    {\n      label: 1,\n      value: 1,\n    },\n    {\n      label: 2,\n      value: 2,\n    },\n    {\n      label: 3,\n      value: 3,\n    },\n  ];\n\n  return (\n    <>\n      <div style={styles.header}>\n        <span>{`Search results for \"${searchTerm}\"`}</span>\n        <div style={styles.filterBar}>\n          <div>\n            <span>School:</span>\n            <AutoComplete\n              style={styles.autocomplete}\n              onSelect={setSchoolFilter}\n              options={schoolOptions}\n              value={schoolFilter}\n              onSearch={(searchText) =>\n                setSchoolOptions(\n                  schoolsAutocompleteOptions.filter((school) =>\n                    school.value\n                      .toLowerCase()\n                      .includes(searchText.toLowerCase())\n                  )\n                )\n              }\n              onChange={(value) => setSchoolFilter(value)}\n              notFoundContent={\n                \"The school you are looking for isn't here. Perhaps you can add them to the app!\"\n              }\n            />\n          </div>\n          <div style={{ display: \"flex\" }}>\n            <span>Semester:</span>\n            <div style={styles.checkboxes}>\n              <Checkbox.Group\n                options={semesterOptions}\n                onChange={setSemestersFilter}\n              />\n            </div>\n          </div>\n          <div>\n            <span>Credits:</span>\n            <InputNumber\n              max={12}\n              onChange={(value) => setCreditsFilter(value as string)}\n              style={styles.creditsInput}\n            />\n          </div>\n        </div>\n      </div>\n      <SearchModuleList modules={searchResults.slice(0, numberOfResults - 1)} />\n      {searchResults.length == numberOfResults && (\n        <SeeMoreButton\n          fetchMoreData={fetchMoreSearchResults}\n          style={{ backgroundColor: descriptionGreen }}\n        />\n      )}\n\n      <SectionTitle title={`Similar results to \"${searchTerm}\"`} />\n      <SearchModuleList modules={[]} />\n      <ModuleCompareModal />\n    </>\n  );\n};\n\nconst styles = {\n  header: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    height: \"8vh\",\n    fontSize: \"1.5em\",\n    color: \"#838383\",\n    fontFamily: \"Mukta\",\n    paddingLeft: 20,\n    margin: \"20px 0px\",\n  },\n  filterBar: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    fontSize: 15,\n    alignItems: \"center\",\n  },\n  autocomplete: {\n    width: 300,\n    margin: \"0px 10px\",\n    position: \"relative\" as \"relative\",\n    // bottom: 2,\n  },\n  checkboxes: {\n    margin: \"0px 10px\",\n    position: \"relative\" as \"relative\",\n    // bottom: 2,\n  },\n  creditsInput: {\n    marginLeft: 10,\n    position: \"relative\" as \"relative\",\n    // bottom: 2,\n  },\n};\n\nSearch.getInitialProps = async ({ query }) => {\n  const searchTerm = query.s;\n  try {\n    const initialSearchResults = await moduleApi.searchModule(\n      searchTerm,\n      SEARCH_INTERVAL + 1\n    );\n    return { initialSearchResults };\n  } catch (err) {\n    return { initialSearchResults: [] };\n  }\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}