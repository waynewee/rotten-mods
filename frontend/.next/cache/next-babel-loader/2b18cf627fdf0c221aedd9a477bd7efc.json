{"ast":null,"code":"import axios from \"axios\";\nimport queryString from \"query-string\";\nimport { serverDomain } from \"../config\";\nconst reviewBaseUrl = `${serverDomain}/api/review`;\nconst ratingBaseUrl = `${serverDomain}/api/rating`;\n\nconst getReviewsOfModule = async (modId, limit = 10, page = 1) => {\n  const query = queryString.stringify({\n    modId\n  });\n  const response = await axios.get(`${reviewBaseUrl}/?${query}`);\n  return response.data;\n};\n\nconst getReviewsOfUser = async userId => {\n  const query = queryString.stringify({\n    userId\n  });\n  const response = await axios.get(`${reviewBaseUrl}/?${query}`, {\n    withCredentials: true\n  });\n  console.log(response.data);\n  return response.data;\n};\n\nconst addReviewOfModule = async body => {\n  const response = await axios.post(reviewBaseUrl, body, {\n    withCredentials: true\n  });\n  return response.status;\n};\n\nconst updateReviewOfModule = async (body, reviewId) => {\n  const response = await axios.put(`${reviewBaseUrl}/${reviewId}`, body, {\n    withCredentials: true\n  });\n  return response.status;\n};\n\nconst addRating = async (value, type, userId, subId, sub) => {\n  const response = await axios.post(ratingBaseUrl, {\n    type,\n    userId,\n    subId,\n    value,\n    sub\n  }, {\n    withCredentials: true\n  });\n  return response.status;\n};\n\nconst getRatingById = async id => {\n  const response = await axios.get(`${ratingBaseUrl}/${id}`);\n  return response.data;\n};\n\nconst getRating = async (subscriberType, subscriberId, userId, ratingType) => {\n  const query = queryString.stringify({\n    sub: subscriberType,\n    subId: subscriberId,\n    userId,\n    type: ratingType\n  });\n  const response = await axios.get(`${ratingBaseUrl}/?${query}`);\n  return response.data;\n};\n\nconst updateRating = async (value, type, userId, subId, sub, ratingId) => {\n  const response = await axios.put(`${ratingBaseUrl}/${ratingId}`, {\n    sub,\n    subId,\n    userId,\n    type,\n    value\n  }, {\n    withCredentials: true\n  });\n  return response.data;\n};\n\nconst deleteRating = async id => {\n  await axios.delete(`${ratingBaseUrl}/${id}`, {\n    withCredentials: true\n  });\n};\n\nexport default {\n  getReviewsOfModule,\n  getReviewsOfUser,\n  addReviewOfModule,\n  addRating,\n  getRatingById,\n  getRating,\n  updateRating,\n  updateReviewOfModule,\n  deleteRating\n};","map":{"version":3,"sources":["/Users/ChesterSim/Desktop/NUS Computer Science/CS3219/cs3219-ay2021-s1-project-2020-s1-g01/frontend/api/review.ts"],"names":["axios","queryString","serverDomain","reviewBaseUrl","ratingBaseUrl","getReviewsOfModule","modId","limit","page","query","stringify","response","get","data","getReviewsOfUser","userId","withCredentials","console","log","addReviewOfModule","body","post","status","updateReviewOfModule","reviewId","put","addRating","value","type","subId","sub","getRatingById","id","getRating","subscriberType","subscriberId","ratingType","updateRating","ratingId","deleteRating","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport queryString from \"query-string\";\nimport { serverDomain } from \"../config\";\nimport { Rating } from \"../types\";\n\nconst reviewBaseUrl = `${serverDomain}/api/review`;\nconst ratingBaseUrl = `${serverDomain}/api/rating`;\n\ninterface RatingInReview {\n  type: string;\n  value: number;\n}\n\ninterface ReviewToSubmit {\n  text: string;\n  semesterTaken: number;\n  acadYearTaken: string;\n  modId: string;\n  userId: string;\n  ratings: RatingInReview[];\n}\n\nconst getReviewsOfModule = async (\n  modId: string,\n  limit: number = 10,\n  page: number = 1\n) => {\n  const query = queryString.stringify({ modId });\n  const response = await axios.get(`${reviewBaseUrl}/?${query}`);\n  return response.data;\n};\n\nconst getReviewsOfUser = async (userId: string) => {\n  const query = queryString.stringify({ userId });\n  const response = await axios.get(`${reviewBaseUrl}/?${query}`, {\n    withCredentials: true,\n  });\n  console.log(response.data)\n  return response.data;\n};\n\nconst addReviewOfModule = async (body: ReviewToSubmit) => {\n  const response = await axios.post(reviewBaseUrl, body, {\n    withCredentials: true,\n  });\n\n  return response.status;\n};\n\nconst updateReviewOfModule = async (body: ReviewToSubmit, reviewId: string) => {\n  const response = await axios.put(`${reviewBaseUrl}/${reviewId}`, body, {\n    withCredentials: true,\n  });\n\n  return response.status;\n};\n\nconst addRating = async (\n  value: number,\n  type: \"difficulty\" | \"star\",\n  userId: string,\n  subId: string,\n  sub: \"mod\" | \"school\" | \"course\"\n) => {\n  const response = await axios.post(\n    ratingBaseUrl,\n    {\n      type,\n      userId,\n      subId,\n      value,\n      sub,\n    },\n    {\n      withCredentials: true,\n    }\n  );\n\n  return response.status;\n};\n\nconst getRatingById = async (id: string) => {\n  const response = await axios.get(`${ratingBaseUrl}/${id}`);\n  return response.data;\n};\n\nconst getRating = async (subscriberType, subscriberId, userId, ratingType) => {\n  const query = queryString.stringify({\n    sub: subscriberType,\n    subId: subscriberId,\n    userId,\n    type: ratingType,\n  });\n  const response = await axios.get(`${ratingBaseUrl}/?${query}`);\n  return response.data;\n};\n\nconst updateRating = async (\n  value: number,\n  type: \"difficulty\" | \"star\",\n  userId: string,\n  subId: string,\n  sub: \"mod\" | \"school\" | \"course\",\n  ratingId: string\n) => {\n  const response = await axios.put(\n    `${ratingBaseUrl}/${ratingId}`,\n    {\n      sub,\n      subId,\n      userId,\n      type,\n      value,\n    },\n    { withCredentials: true }\n  );\n  return response.data;\n};\n\nconst deleteRating = async (id: string) => {\n  await axios.delete(`${ratingBaseUrl}/${id}`, { withCredentials: true });\n}\n\nexport default {\n  getReviewsOfModule,\n  getReviewsOfUser,\n  addReviewOfModule,\n  addRating,\n  getRatingById,\n  getRating,\n  updateRating,\n  updateReviewOfModule,\n  deleteRating\n};\n"]},"metadata":{},"sourceType":"module"}