{"ast":null,"code":"import { logInAction, logOutAction } from './../redux/actions/auth';\nimport authApi from \"../api/auth\";\nimport courseApi from \"../api/course\";\nimport { store } from \"../redux/store\";\nimport { message } from \"antd\";\n\nasync function signUp(values) {\n  const {\n    fullname,\n    emailaddress,\n    userpassword,\n    university,\n    course,\n    yearofstudy\n  } = values; // let createUserConfig = {\n  //     method: 'post',\n  //     url: 'http://localhost:8080/api/user',\n  //     headers: {\n  //         'Content-Type': 'application/json'\n  //     },\n  //     data: {\n  //         \"name\": values.fullname,\n  //         \"email\": values.emailaddress,\n  //         \"password\": values.userpassword,\n  //         \"schoolId\": values.university,\n  //         \"courseId\": values.course,\n  //         \"currentYear\": values.yearofstudy\n  //     }\n  // };\n  // let createSchoolConfig = {\n  //     method: 'post',\n  //     url: 'http://localhost:8080/api/school',\n  //     headers: {\n  //         'Content-Type': 'application/json'\n  //     },\n  //     data: {\n  //         \"name\": values.fullname,\n  //     }\n  // };\n  // let createCourseConfig = {\n  //     method: 'post',\n  //     url: 'http://localhost:8080/api/course',\n  //     headers: {\n  //         'Content-Type': 'application/json'\n  //     },\n  //     data: {\n  //         \"name\": values.fullname,\n  //     }\n  // };\n  // if schoolId is user created, then create a new school in the system\n\n  if (course !== \"userCreated\" && university !== \"userCreated\") {\n    const data = await authApi.signUp(fullname, emailaddress, userpassword, university, course, yearofstudy).catch(error => {\n      throw error;\n    });\n\n    if (data) {\n      console.log(\"sign up success\");\n    }\n  }\n}\n\nasync function logIn(values) {\n  const {\n    emailaddress,\n    password\n  } = values;\n  const data = await authApi.logIn(emailaddress, password).catch(error => {\n    throw error;\n  });\n\n  if (data) {\n    const {\n      name,\n      currentYear,\n      courseId,\n      _id\n    } = data;\n    const courseData = await courseApi.getCourse(courseId);\n    const user = {\n      fullName: name,\n      yearOfStudy: currentYear,\n      studyCourse: courseData.name,\n      _id\n    };\n    window.localStorage.setItem(\"ROTTENMODS_EMAIL\", emailaddress);\n    window.localStorage.setItem(\"ROTTENMODS_PASSWORD\", password);\n    store.dispatch(logInAction(user));\n  }\n}\n\nasync function logOut() {\n  const response = await authApi.logOut().catch(error => {\n    throw error;\n  });\n  window.localStorage.removeItem(\"ROTTENMODS_EMAIL\");\n  window.localStorage.removeItem(\"ROTTENMODS_PASSWORD\");\n  message.success(\"Successfully Logged Out!\");\n  store.dispatch(logOutAction());\n}\n\n;\nexport default {\n  signUp,\n  logIn,\n  logOut\n};","map":null,"metadata":{},"sourceType":"module"}