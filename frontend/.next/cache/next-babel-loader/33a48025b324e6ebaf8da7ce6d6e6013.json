{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ChesterSim/Desktop/NUS Computer Science/CS3219/cs3219-ay2021-s1-project-2020-s1-g01/frontend/components/ModuleInformation.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport bookmarkApi from \"../api/bookmark\";\nimport plannedModApi from \"../api/planned-mod\";\nimport reactionApi from \"../api/reaction\";\nimport { updatedPersonalPlannedModules, updatePersonalBookmarks, triggerRequireLoginMessage } from \"../utils/helpers\";\nimport ModuleSmallDetail from \"../components/ModuleSmallDetail\";\nimport UserClockIcon from \"../icons/UserClockIcon\";\nimport CoinsFilledIcon from \"../icons/CoinsFilledIcon\";\nimport HourGlassHalfFilledIcon from \"../icons/HourGlassHalfFilledIcon\";\nimport LayerGroupIcon from \"../icons/LayerGroupIcon\";\nimport StarFilledIcon from \"../icons/StarFilledIcon\";\nimport LikeFilledIcon from \"../icons/LikeFilledIcon\";\nimport StarOutlinedIcon from \"../icons/StarOutlinedIcon\";\nimport LikeOutlinedIcon from \"../icons/LikeOutlinedIcon\";\nimport UniversityIcon from \"../icons/UniversityIcon\";\nimport BookmarkFilledIcon from \"../icons/BookmarkFilledIcon\";\nimport BookmarkOutlinedIcon from \"../icons/BookmarkOutlinedIcon\";\nimport CheckboxOutlinedIcon from \"../icons/CheckboxOutlinedIcon\";\nimport { BookFilled, BookOutlined } from \"@ant-design/icons\";\nimport PencilFilledIcon from \"../icons/PencilFilledIcon\";\nimport Button from \"./Button\";\nimport { codeBlue, reviewBlue, descriptionGreen, ratingsYellow } from \"../styles/colors\";\nimport AddPlannedModModal from \"./AddPlannedModModal\";\nimport { message } from \"antd\";\n\nvar ModuleInformation = function ModuleInformation(_ref) {\n  _s();\n\n  var _useSelector$find, _useSelector$find2, _schools$find, _rating$difficulty, _rating$star, _module$reaction$like, _module$reaction, _module$reaction$like2;\n\n  var module = _ref.module,\n      setAddReviewModalVisibility = _ref.setAddReviewModalVisibility,\n      setAddRatingsModalVisibility = _ref.setAddRatingsModalVisibility,\n      reviewByUser = _ref.reviewByUser,\n      updateModule = _ref.updateModule;\n\n  var _useState = useState(false),\n      isAddPlannedModModalVisible = _useState[0],\n      setAddPlannedModModalVisibility = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      likeReactionId = _useState2[0],\n      setLikeReactionId = _useState2[1]; // is true if it is reaction's id\n\n\n  var userId = useSelector(function (state) {\n    var _state$auth$user;\n\n    return (_state$auth$user = state.auth.user) === null || _state$auth$user === void 0 ? void 0 : _state$auth$user._id;\n  });\n  var bookmarkId = (_useSelector$find = useSelector(function (state) {\n    return state.personalModules.bookmarks;\n  }).find(function (bookmark) {\n    return bookmark.modId === (module === null || module === void 0 ? void 0 : module._id);\n  })) === null || _useSelector$find === void 0 ? void 0 : _useSelector$find._id;\n  var plannedModId = (_useSelector$find2 = useSelector(function (state) {\n    return state.personalModules.plannedMods;\n  }).find(function (plannedMod) {\n    return plannedMod.modId === (module === null || module === void 0 ? void 0 : module._id);\n  })) === null || _useSelector$find2 === void 0 ? void 0 : _useSelector$find2._id;\n  var schools = useSelector(function (state) {\n    return state.schools;\n  });\n  var isLoggedIn = useSelector(function (state) {\n    return state.auth.isLoggedIn;\n  });\n  var code = module.code,\n      _module$workload = module.workload,\n      workload = _module$workload === void 0 ? 10 : _module$workload,\n      rating = module.rating,\n      schoolId = module.schoolId,\n      description = module.description,\n      title = module.title,\n      _module$credit = module.credit,\n      credit = _module$credit === void 0 ? 4 : _module$credit,\n      _module$semester = module.semester,\n      semester = _module$semester === void 0 ? [1, 2] : _module$semester,\n      prereqs = module.prereqs,\n      _id = module._id;\n  var university = (_schools$find = schools.find(function (school) {\n    return school._id === schoolId;\n  })) === null || _schools$find === void 0 ? void 0 : _schools$find.name;\n  var difficulty = (rating === null || rating === void 0 ? void 0 : (_rating$difficulty = rating.difficulty) === null || _rating$difficulty === void 0 ? void 0 : _rating$difficulty.value) || 0;\n  var star = (rating === null || rating === void 0 ? void 0 : (_rating$star = rating.star) === null || _rating$star === void 0 ? void 0 : _rating$star.value) || 0;\n  useEffect(function () {\n    fetchIsLikedByUser();\n  }, [userId]);\n\n  var fetchIsLikedByUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var reaction;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return reactionApi.getReaction(\"mod\", module._id, userId, \"like\");\n\n            case 3:\n              reaction = _context.sent;\n              setLikeReactionId(reaction._id);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              setLikeReactionId(\"\");\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchIsLikedByUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var toggleBookmark = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (isLoggedIn) {\n                _context2.next = 3;\n                break;\n              }\n\n              triggerRequireLoginMessage();\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              if (bookmarkId) {\n                _context2.next = 8;\n                break;\n              }\n\n              _context2.next = 6;\n              return bookmarkApi.addBookmark(userId, _id);\n\n            case 6:\n              _context2.next = 10;\n              break;\n\n            case 8:\n              _context2.next = 10;\n              return bookmarkApi.deleteBookmark(bookmarkId);\n\n            case 10:\n              updatePersonalBookmarks(userId);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function toggleBookmark() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var togglePlanner = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (isLoggedIn) {\n                _context3.next = 3;\n                break;\n              }\n\n              triggerRequireLoginMessage();\n              return _context3.abrupt(\"return\");\n\n            case 3:\n              if (plannedModId) {\n                _context3.next = 7;\n                break;\n              }\n\n              setAddPlannedModModalVisibility(true);\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.next = 9;\n              return plannedModApi.removePlannedMod(plannedModId);\n\n            case 9:\n              updatedPersonalPlannedModules(userId);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function togglePlanner() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var toggleAddRatingsModal = function toggleAddRatingsModal() {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    if (reviewByUser) {\n      message.error(\"You have posted a Review before. Edit your Review instead!\");\n      return;\n    }\n\n    setAddRatingsModalVisibility(true);\n  };\n\n  var toggleAddReviewModal = function toggleAddReviewModal() {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    setAddReviewModalVisibility(true);\n  };\n\n  var toggleLike = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (isLoggedIn) {\n                _context4.next = 3;\n                break;\n              }\n\n              triggerRequireLoginMessage();\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              if (!likeReactionId) {\n                _context4.next = 8;\n                break;\n              }\n\n              _context4.next = 6;\n              return reactionApi.deleteReaction(likeReactionId);\n\n            case 6:\n              _context4.next = 10;\n              break;\n\n            case 8:\n              _context4.next = 10;\n              return reactionApi.addReaction(\"mod\", module._id, userId, \"like\");\n\n            case 10:\n              fetchIsLikedByUser();\n              updateModule();\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function toggleLike() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    style: styles.moduleMeta,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: styles.moduleInformation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: styles.moduleCode,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, code), __jsx(\"div\", {\n    style: styles.moduleSmallDetailsColumn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, __jsx(ModuleSmallDetail, {\n    Icon: UniversityIcon,\n    text: \"University: \".concat(university !== null && university !== void 0 ? university : \"-\"),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }), __jsx(ModuleSmallDetail, {\n    Icon: HourGlassHalfFilledIcon,\n    text: \"Semester(s) offered: \".concat(semester.sort().join(\", \") || \"-\"),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    style: styles.moduleSmallDetailsColumn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, __jsx(ModuleSmallDetail, {\n    Icon: CoinsFilledIcon,\n    text: \"Credit: \".concat(credit),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), __jsx(ModuleSmallDetail, {\n    Icon: UserClockIcon,\n    text: \"Workload/Week: \".concat(workload, \" hours\"),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    style: styles.moduleSmallDetailsColumn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, __jsx(ModuleSmallDetail, {\n    Icon: CheckboxOutlinedIcon,\n    text: \"Pre-reqs: \".concat(prereqs.join(\", \") || \"None\"),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }), __jsx(ModuleSmallDetail, {\n    Icon: LayerGroupIcon,\n    text: \"Difficulty: \".concat(difficulty.toFixed(1) == \"0.0\" ? \"-\" : difficulty.toFixed(1), \"/5\"),\n    iconStyle: styles.iconStyle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      alignContent: \"center\",\n      height: \"100%\",\n      fontSize: 14\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      padding: \"10px 10px 10px 0px\",\n      width: \"100%\",\n      color: \"#838383\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginRight: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, __jsx(LikeOutlinedIcon, {\n    style: {\n      height: 20,\n      color: reviewBlue,\n      margin: \"0px 10px\",\n      position: \"relative\",\n      bottom: -2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }), \"\".concat((_module$reaction$like = (_module$reaction = module.reaction) === null || _module$reaction === void 0 ? void 0 : (_module$reaction$like2 = _module$reaction.like) === null || _module$reaction$like2 === void 0 ? void 0 : _module$reaction$like2.count) !== null && _module$reaction$like !== void 0 ? _module$reaction$like : 0)), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, __jsx(StarFilledIcon, {\n    style: {\n      height: 20,\n      color: ratingsYellow,\n      margin: \"0px 10px\",\n      position: \"relative\",\n      bottom: -2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 15\n    }\n  }), \"\".concat(star.toFixed(1)))), __jsx(\"div\", {\n    style: styles.actionsBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    onClick: toggleLike,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, likeReactionId ? __jsx(LikeFilledIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: reviewBlue,\n      fontSize: 25\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }\n  }) : __jsx(LikeOutlinedIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: reviewBlue,\n      fontSize: 25\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }\n  })), __jsx(Button, {\n    onClick: togglePlanner,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, plannedModId ? __jsx(BookFilled, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: \"#76CCB7\",\n      fontSize: 25\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }) : __jsx(BookOutlined, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: \"#76CCB7\",\n      fontSize: 25\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 17\n    }\n  })), __jsx(Button, {\n    onClick: toggleBookmark,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }, bookmarkId ? __jsx(BookmarkFilledIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: \"#289FA7\"\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }\n  }) : __jsx(BookmarkOutlinedIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: \"#289FA7\"\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  })), __jsx(Button, {\n    onClick: toggleAddRatingsModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }, __jsx(StarOutlinedIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: ratingsYellow\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  })), __jsx(Button, {\n    style: {\n      backgroundColor: \"blue\"\n    },\n    onClick: toggleAddReviewModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, __jsx(PencilFilledIcon, {\n    style: _objectSpread(_objectSpread({}, styles.actionIcon), {}, {\n      color: \"#7497CC\"\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 15\n    }\n  }))))), __jsx(\"div\", {\n    style: styles.infoContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: styles.moduleTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }\n  }, title), __jsx(\"div\", {\n    style: styles.moduleDescription,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }\n  }, description)), __jsx(AddPlannedModModal, {\n    isModalVisible: isAddPlannedModModalVisible,\n    setModalVisibility: setAddPlannedModModalVisibility,\n    modId: _id,\n    userId: userId,\n    plannedModId: plannedModId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }\n  }));\n};\n\n_s(ModuleInformation, \"FcWSJM6n6GhFtIg0HNX2zvxeHD8=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ModuleInformation;\nvar styles = {\n  container: {\n    fontFamily: \"Roboto\",\n    marginTop: 30\n  },\n  moduleMeta: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    height: 80\n  },\n  moduleInformation: {\n    display: \"flex\",\n    justifyContent: \"flex-start\"\n  },\n  moduleCode: {\n    backgroundColor: codeBlue,\n    height: 80,\n    borderRadius: 12,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: \"26px\",\n    color: \"white\",\n    padding: \"0px 30px\",\n    boxShadow: \"0px 4px 4px rgba(0, 0, 0, 0.25)\"\n  },\n  moduleSmallDetailsColumn: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\"\n  },\n  actionsBar: {\n    display: \"flex\"\n  },\n  actionIcon: {\n    height: 25,\n    margin: \"0px 10px\"\n  },\n  infoContainer: {\n    backgroundColor: descriptionGreen,\n    marginTop: 10,\n    borderRadius: 15,\n    padding: \"20px 30px 30px 30px\",\n    color: \"#fff\",\n    boxShadow: \"0px 8px 8px rgba(0, 0, 0, 0.25)\"\n  },\n  moduleTitle: {\n    fontSize: 30,\n    fontWeight: \"bold\"\n  },\n  moduleDescription: {\n    textAlign: \"justify\",\n    fontWeight: 300\n  },\n  iconStyle: {\n    color: \"#B9B9B9\"\n  }\n};\nexport default ModuleInformation;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModuleInformation\");","map":{"version":3,"sources":["/Users/ChesterSim/Desktop/NUS Computer Science/CS3219/cs3219-ay2021-s1-project-2020-s1-g01/frontend/components/ModuleInformation.tsx"],"names":["useState","useEffect","useSelector","bookmarkApi","plannedModApi","reactionApi","updatedPersonalPlannedModules","updatePersonalBookmarks","triggerRequireLoginMessage","ModuleSmallDetail","UserClockIcon","CoinsFilledIcon","HourGlassHalfFilledIcon","LayerGroupIcon","StarFilledIcon","LikeFilledIcon","StarOutlinedIcon","LikeOutlinedIcon","UniversityIcon","BookmarkFilledIcon","BookmarkOutlinedIcon","CheckboxOutlinedIcon","BookFilled","BookOutlined","PencilFilledIcon","Button","codeBlue","reviewBlue","descriptionGreen","ratingsYellow","AddPlannedModModal","message","ModuleInformation","module","setAddReviewModalVisibility","setAddRatingsModalVisibility","reviewByUser","updateModule","isAddPlannedModModalVisible","setAddPlannedModModalVisibility","likeReactionId","setLikeReactionId","userId","state","auth","user","_id","bookmarkId","personalModules","bookmarks","find","bookmark","modId","plannedModId","plannedMods","plannedMod","schools","isLoggedIn","code","workload","rating","schoolId","description","title","credit","semester","prereqs","university","school","name","difficulty","value","star","fetchIsLikedByUser","getReaction","reaction","toggleBookmark","addBookmark","deleteBookmark","togglePlanner","removePlannedMod","toggleAddRatingsModal","error","toggleAddReviewModal","toggleLike","deleteReaction","addReaction","styles","container","moduleMeta","moduleInformation","moduleCode","moduleSmallDetailsColumn","iconStyle","sort","join","toFixed","display","flexDirection","justifyContent","alignContent","height","fontSize","padding","width","color","marginRight","margin","position","bottom","like","count","actionsBar","actionIcon","backgroundColor","infoContainer","moduleTitle","moduleDescription","fontFamily","marginTop","alignItems","borderRadius","boxShadow","fontWeight","textAlign"],"mappings":";;;;;;;;;;;;;;;AAAA,SAAmCA,QAAnC,EAA6CC,SAA7C,QAA8D,OAA9D;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,SACEC,6BADF,EAEEC,uBAFF,EAGEC,0BAHF,QAIO,kBAJP;AAMA,OAAOC,iBAAP,MAA8B,iCAA9B;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AACA,OAAOC,uBAAP,MAAoC,kCAApC;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,gBAAP,MAA6B,2BAA7B;AACA,OAAOC,gBAAP,MAA6B,2BAA7B;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,kBAAP,MAA+B,6BAA/B;AACA,OAAOC,oBAAP,MAAiC,+BAAjC;AACA,OAAOC,oBAAP,MAAiC,+BAAjC;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,mBAAzC;AAEA,OAAOC,gBAAP,MAA6B,2BAA7B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SACEC,QADF,EAEEC,UAFF,EAGEC,gBAHF,EAIEC,aAJF,QAKO,kBALP;AAMA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,SAASC,OAAT,QAAwB,MAAxB;;AAUA,IAAMC,iBAAmD,GAAG,SAAtDA,iBAAsD,OAMtD;AAAA;;AAAA;;AAAA,MALJC,MAKI,QALJA,MAKI;AAAA,MAJJC,2BAII,QAJJA,2BAII;AAAA,MAHJC,4BAGI,QAHJA,4BAGI;AAAA,MAFJC,YAEI,QAFJA,YAEI;AAAA,MADJC,YACI,QADJA,YACI;;AAAA,kBAIArC,QAAQ,CAAC,KAAD,CAJR;AAAA,MAEFsC,2BAFE;AAAA,MAGFC,+BAHE;;AAAA,mBAKwCvC,QAAQ,CAAC,EAAD,CALhD;AAAA,MAKGwC,cALH;AAAA,MAKmBC,iBALnB,kBAKsD;;;AAE1D,MAAMC,MAAM,GAAGxC,WAAW,CAAC,UAACyC,KAAD;AAAA;;AAAA,+BAAWA,KAAK,CAACC,IAAN,CAAWC,IAAtB,qDAAW,iBAAiBC,GAA5B;AAAA,GAAD,CAA1B;AACA,MAAMC,UAAU,wBAAG7C,WAAW,CAC5B,UAACyC,KAAD;AAAA,WAAWA,KAAK,CAACK,eAAN,CAAsBC,SAAjC;AAAA,GAD4B,CAAX,CAEjBC,IAFiB,CAEZ,UAACC,QAAD;AAAA,WAAcA,QAAQ,CAACC,KAAT,MAAmBnB,MAAnB,aAAmBA,MAAnB,uBAAmBA,MAAM,CAAEa,GAA3B,CAAd;AAAA,GAFY,CAAH,sDAAG,kBAEmCA,GAFtD;AAGA,MAAMO,YAAY,yBAAGnD,WAAW,CAC9B,UAACyC,KAAD;AAAA,WAAWA,KAAK,CAACK,eAAN,CAAsBM,WAAjC;AAAA,GAD8B,CAAX,CAEnBJ,IAFmB,CAEd,UAACK,UAAD;AAAA,WAAgBA,UAAU,CAACH,KAAX,MAAqBnB,MAArB,aAAqBA,MAArB,uBAAqBA,MAAM,CAAEa,GAA7B,CAAhB;AAAA,GAFc,CAAH,uDAAG,mBAEqCA,GAF1D;AAGA,MAAMU,OAAO,GAAGtD,WAAW,CAAC,UAACyC,KAAD;AAAA,WAAWA,KAAK,CAACa,OAAjB;AAAA,GAAD,CAA3B;AACA,MAAMC,UAAU,GAAGvD,WAAW,CAAC,UAACyC,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAN,CAAWa,UAAtB;AAAA,GAAD,CAA9B;AAfI,MAkBFC,IAlBE,GA4BAzB,MA5BA,CAkBFyB,IAlBE;AAAA,yBA4BAzB,MA5BA,CAmBF0B,QAnBE;AAAA,MAmBFA,QAnBE,iCAmBS,EAnBT;AAAA,MAoBFC,MApBE,GA4BA3B,MA5BA,CAoBF2B,MApBE;AAAA,MAqBFC,QArBE,GA4BA5B,MA5BA,CAqBF4B,QArBE;AAAA,MAsBFC,WAtBE,GA4BA7B,MA5BA,CAsBF6B,WAtBE;AAAA,MAuBFC,KAvBE,GA4BA9B,MA5BA,CAuBF8B,KAvBE;AAAA,uBA4BA9B,MA5BA,CAwBF+B,MAxBE;AAAA,MAwBFA,MAxBE,+BAwBO,CAxBP;AAAA,yBA4BA/B,MA5BA,CAyBFgC,QAzBE;AAAA,MAyBFA,QAzBE,iCAyBS,CAAC,CAAD,EAAI,CAAJ,CAzBT;AAAA,MA0BFC,OA1BE,GA4BAjC,MA5BA,CA0BFiC,OA1BE;AAAA,MA2BFpB,GA3BE,GA4BAb,MA5BA,CA2BFa,GA3BE;AA6BJ,MAAMqB,UAAU,oBAAGX,OAAO,CAACN,IAAR,CAAa,UAACkB,MAAD;AAAA,WAAYA,MAAM,CAACtB,GAAP,KAAee,QAA3B;AAAA,GAAb,CAAH,kDAAG,cAAmDQ,IAAtE;AACA,MAAMC,UAAU,GAAG,CAAAV,MAAM,SAAN,IAAAA,MAAM,WAAN,kCAAAA,MAAM,CAAEU,UAAR,0EAAoBC,KAApB,KAA6B,CAAhD;AACA,MAAMC,IAAI,GAAG,CAAAZ,MAAM,SAAN,IAAAA,MAAM,WAAN,4BAAAA,MAAM,CAAEY,IAAR,8DAAcD,KAAd,KAAuB,CAApC;AAEAtE,EAAAA,SAAS,CAAC,YAAM;AACdwE,IAAAA,kBAAkB;AACnB,GAFQ,EAEN,CAAC/B,MAAD,CAFM,CAAT;;AAIA,MAAM+B,kBAAkB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEApE,WAAW,CAACqE,WAAZ,CACrB,KADqB,EAErBzC,MAAM,CAACa,GAFc,EAGrBJ,MAHqB,EAIrB,MAJqB,CAFA;;AAAA;AAEjBiC,cAAAA,QAFiB;AAQvBlC,cAAAA,iBAAiB,CAACkC,QAAQ,CAAC7B,GAAV,CAAjB;AARuB;AAAA;;AAAA;AAAA;AAAA;AAUvBL,cAAAA,iBAAiB,CAAC,EAAD,CAAjB;;AAVuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBgC,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AAcA,MAAMG,cAAc;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kBAChBnB,UADgB;AAAA;AAAA;AAAA;;AAEnBjD,cAAAA,0BAA0B;AAFP;;AAAA;AAAA,kBAMhBuC,UANgB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAOb5C,WAAW,CAAC0E,WAAZ,CAAwBnC,MAAxB,EAAgCI,GAAhC,CAPa;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBASb3C,WAAW,CAAC2E,cAAZ,CAA2B/B,UAA3B,CATa;;AAAA;AAYrBxC,cAAAA,uBAAuB,CAACmC,MAAD,CAAvB;;AAZqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdkC,cAAc;AAAA;AAAA;AAAA,KAApB;;AAeA,MAAMG,aAAa;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kBACftB,UADe;AAAA;AAAA;AAAA;;AAElBjD,cAAAA,0BAA0B;AAFR;;AAAA;AAAA,kBAMf6C,YANe;AAAA;AAAA;AAAA;;AAOlBd,cAAAA,+BAA+B,CAAC,IAAD,CAA/B;AAPkB;AAAA;;AAAA;AAAA;AAAA,qBASZnC,aAAa,CAAC4E,gBAAd,CAA+B3B,YAA/B,CATY;;AAAA;AAUlB/C,cAAAA,6BAA6B,CAACoC,MAAD,CAA7B;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbqC,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAcA,MAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClC,QAAI,CAACxB,UAAL,EAAiB;AACfjD,MAAAA,0BAA0B;AAC1B;AACD;;AAED,QAAI4B,YAAJ,EAAkB;AAChBL,MAAAA,OAAO,CAACmD,KAAR,CACE,4DADF;AAGA;AACD;;AAED/C,IAAAA,4BAA4B,CAAC,IAAD,CAA5B;AACD,GAdD;;AAgBA,MAAMgD,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACjC,QAAI,CAAC1B,UAAL,EAAiB;AACfjD,MAAAA,0BAA0B;AAC1B;AACD;;AACD0B,IAAAA,2BAA2B,CAAC,IAAD,CAA3B;AACD,GAND;;AAQA,MAAMkD,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kBACZ3B,UADY;AAAA;AAAA;AAAA;;AAEfjD,cAAAA,0BAA0B;AAFX;;AAAA;AAAA,mBAMbgC,cANa;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAOTnC,WAAW,CAACgF,cAAZ,CAA2B7C,cAA3B,CAPS;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBASTnC,WAAW,CAACiF,WAAZ,CAAwB,KAAxB,EAA+BrD,MAAM,CAACa,GAAtC,EAA2CJ,MAA3C,EAAmD,MAAnD,CATS;;AAAA;AAWjB+B,cAAAA,kBAAkB;AAClBpC,cAAAA,YAAY;;AAZK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAV+C,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAeA,SACE;AAAK,IAAA,KAAK,EAAEG,MAAM,CAACC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAED,MAAM,CAACE,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAEF,MAAM,CAACG,iBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAEH,MAAM,CAACI,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgCjC,IAAhC,CADF,EAEE;AAAK,IAAA,KAAK,EAAE6B,MAAM,CAACK,wBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AACE,IAAA,IAAI,EAAE1E,cADR;AAEE,IAAA,IAAI,wBAAiBiD,UAAjB,aAAiBA,UAAjB,cAAiBA,UAAjB,GAA+B,GAA/B,CAFN;AAGE,IAAA,SAAS,EAAEoB,MAAM,CAACM,SAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME,MAAC,iBAAD;AACE,IAAA,IAAI,EAAEjF,uBADR;AAEE,IAAA,IAAI,iCAA0BqD,QAAQ,CAAC6B,IAAT,GAAgBC,IAAhB,CAAqB,IAArB,KAA8B,GAAxD,CAFN;AAGE,IAAA,SAAS,EAAER,MAAM,CAACM,SAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CAFF,EAcE;AAAK,IAAA,KAAK,EAAEN,MAAM,CAACK,wBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AACE,IAAA,IAAI,EAAEjF,eADR;AAEE,IAAA,IAAI,oBAAaqD,MAAb,CAFN;AAGE,IAAA,SAAS,EAAEuB,MAAM,CAACM,SAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME,MAAC,iBAAD;AACE,IAAA,IAAI,EAAEnF,aADR;AAEE,IAAA,IAAI,2BAAoBiD,QAApB,WAFN;AAGE,IAAA,SAAS,EAAE4B,MAAM,CAACM,SAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CAdF,EA0BE;AAAK,IAAA,KAAK,EAAEN,MAAM,CAACK,wBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,iBAAD;AACE,IAAA,IAAI,EAAEvE,oBADR;AAEE,IAAA,IAAI,sBAAe6C,OAAO,CAAC6B,IAAR,CAAa,IAAb,KAAsB,MAArC,CAFN;AAGE,IAAA,SAAS,EAAER,MAAM,CAACM,SAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME,MAAC,iBAAD;AACE,IAAA,IAAI,EAAEhF,cADR;AAEE,IAAA,IAAI,wBACFyD,UAAU,CAAC0B,OAAX,CAAmB,CAAnB,KAAyB,KAAzB,GAAiC,GAAjC,GAAuC1B,UAAU,CAAC0B,OAAX,CAAmB,CAAnB,CADrC,OAFN;AAKE,IAAA,SAAS,EAAET,MAAM,CAACM,SALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CA1BF,CADF,EA0CE;AACE,IAAA,KAAK,EAAE;AACLI,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,aAAa,EAAE,QAFV;AAGLC,MAAAA,cAAc,EAAE,eAHX;AAILC,MAAAA,YAAY,EAAE,QAJT;AAKLC,MAAAA,MAAM,EAAE,MALH;AAMLC,MAAAA,QAAQ,EAAE;AANL,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUE;AACE,IAAA,KAAK,EAAE;AACLL,MAAAA,OAAO,EAAE,MADJ;AAELE,MAAAA,cAAc,EAAE,UAFX;AAGLI,MAAAA,OAAO,EAAE,oBAHJ;AAILC,MAAAA,KAAK,EAAE,MAJF;AAKLC,MAAAA,KAAK,EAAE;AALF,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,KAAK,EAAE;AACLL,MAAAA,MAAM,EAAE,EADH;AAELI,MAAAA,KAAK,EAAE9E,UAFF;AAGLgF,MAAAA,MAAM,EAAE,UAHH;AAILC,MAAAA,QAAQ,EAAE,UAJL;AAKLC,MAAAA,MAAM,EAAE,CAAC;AALJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,yDAUM5E,MAAM,CAAC0C,QAVb,+EAUM,iBAAiBmC,IAVvB,2DAUM,uBAAuBC,KAV7B,yEAUsC,CAVtC,EATF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,cAAD;AACE,IAAA,KAAK,EAAE;AACLV,MAAAA,MAAM,EAAE,EADH;AAELI,MAAAA,KAAK,EAAE5E,aAFF;AAGL8E,MAAAA,MAAM,EAAE,UAHH;AAILC,MAAAA,QAAQ,EAAE,UAJL;AAKLC,MAAAA,MAAM,EAAE,CAAC;AALJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,YAUMrC,IAAI,CAACwB,OAAL,CAAa,CAAb,CAVN,EArBF,CAVF,EA6CE;AAAK,IAAA,KAAK,EAAET,MAAM,CAACyB,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAE5B,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG5C,cAAc,GACb,MAAC,cAAD;AACE,IAAA,KAAK,kCACA+C,MAAM,CAAC0B,UADP;AAEHR,MAAAA,KAAK,EAAE9E,UAFJ;AAGH2E,MAAAA,QAAQ,EAAE;AAHP,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa,GASb,MAAC,gBAAD;AACE,IAAA,KAAK,kCACAf,MAAM,CAAC0B,UADP;AAEHR,MAAAA,KAAK,EAAE9E,UAFJ;AAGH2E,MAAAA,QAAQ,EAAE;AAHP,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CADF,EAoBE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAEvB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG1B,YAAY,GACX,MAAC,UAAD;AACE,IAAA,KAAK,kCACAkC,MAAM,CAAC0B,UADP;AAEHR,MAAAA,KAAK,EAAE,SAFJ;AAGHH,MAAAA,QAAQ,EAAE;AAHP,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADW,GASX,MAAC,YAAD;AACE,IAAA,KAAK,kCACAf,MAAM,CAAC0B,UADP;AAEHR,MAAAA,KAAK,EAAE,SAFJ;AAGHH,MAAAA,QAAQ,EAAE;AAHP,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CApBF,EAuCE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAE1B,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG7B,UAAU,GACT,MAAC,kBAAD;AACE,IAAA,KAAK,kCAAOwC,MAAM,CAAC0B,UAAd;AAA0BR,MAAAA,KAAK,EAAE;AAAjC,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADS,GAKT,MAAC,oBAAD;AACE,IAAA,KAAK,kCAAOlB,MAAM,CAAC0B,UAAd;AAA0BR,MAAAA,KAAK,EAAE;AAAjC,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,CAvCF,EAkDE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAExB,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,KAAK,kCAAOM,MAAM,CAAC0B,UAAd;AAA0BR,MAAAA,KAAK,EAAE5E;AAAjC,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAlDF,EAuDE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAE;AAAEqF,MAAAA,eAAe,EAAE;AAAnB,KAAf;AAA4C,IAAA,OAAO,EAAE/B,oBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,gBAAD;AACE,IAAA,KAAK,kCAAOI,MAAM,CAAC0B,UAAd;AAA0BR,MAAAA,KAAK,EAAE;AAAjC,MADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAvDF,CA7CF,CA1CF,CADF,EAuJE;AAAK,IAAA,KAAK,EAAElB,MAAM,CAAC4B,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAE5B,MAAM,CAAC6B,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCrD,KAAjC,CADF,EAEE;AAAK,IAAA,KAAK,EAAEwB,MAAM,CAAC8B,iBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuCvD,WAAvC,CAFF,CAvJF,EA2JE,MAAC,kBAAD;AACE,IAAA,cAAc,EAAExB,2BADlB;AAEE,IAAA,kBAAkB,EAAEC,+BAFtB;AAGE,IAAA,KAAK,EAAEO,GAHT;AAIE,IAAA,MAAM,EAAEJ,MAJV;AAKE,IAAA,YAAY,EAAEW,YALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3JF,CADF;AAqKD,CAlSD;;GAAMrB,iB;UAaW9B,W,EACIA,W,EAGEA,W,EAGLA,W,EACGA,W;;;KArBf8B,iB;AAoSN,IAAMuD,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE;AACT8B,IAAAA,UAAU,EAAE,QADH;AAETC,IAAAA,SAAS,EAAE;AAFF,GADE;AAKb9B,EAAAA,UAAU,EAAE;AACVQ,IAAAA,OAAO,EAAE,MADC;AAEVE,IAAAA,cAAc,EAAE,eAFN;AAGVqB,IAAAA,UAAU,EAAE,QAHF;AAIVnB,IAAAA,MAAM,EAAE;AAJE,GALC;AAWbX,EAAAA,iBAAiB,EAAE;AACjBO,IAAAA,OAAO,EAAE,MADQ;AAEjBE,IAAAA,cAAc,EAAE;AAFC,GAXN;AAebR,EAAAA,UAAU,EAAE;AACVuB,IAAAA,eAAe,EAAExF,QADP;AAEV2E,IAAAA,MAAM,EAAE,EAFE;AAGVoB,IAAAA,YAAY,EAAE,EAHJ;AAIVxB,IAAAA,OAAO,EAAE,MAJC;AAKVE,IAAAA,cAAc,EAAE,QALN;AAMVqB,IAAAA,UAAU,EAAE,QANF;AAOVlB,IAAAA,QAAQ,EAAE,MAPA;AAQVG,IAAAA,KAAK,EAAE,OARG;AASVF,IAAAA,OAAO,EAAE,UATC;AAUVmB,IAAAA,SAAS,EAAE;AAVD,GAfC;AA2Bb9B,EAAAA,wBAAwB,EAAE;AACxBK,IAAAA,OAAO,EAAE,MADe;AAExBC,IAAAA,aAAa,EAAE,QAFS;AAGxBC,IAAAA,cAAc,EAAE;AAHQ,GA3Bb;AAgCba,EAAAA,UAAU,EAAE;AACVf,IAAAA,OAAO,EAAE;AADC,GAhCC;AAmCbgB,EAAAA,UAAU,EAAE;AACVZ,IAAAA,MAAM,EAAE,EADE;AAEVM,IAAAA,MAAM,EAAE;AAFE,GAnCC;AAuCbQ,EAAAA,aAAa,EAAE;AACbD,IAAAA,eAAe,EAAEtF,gBADJ;AAEb2F,IAAAA,SAAS,EAAE,EAFE;AAGbE,IAAAA,YAAY,EAAE,EAHD;AAIblB,IAAAA,OAAO,EAAE,qBAJI;AAKbE,IAAAA,KAAK,EAAE,MALM;AAMbiB,IAAAA,SAAS,EAAE;AANE,GAvCF;AA+CbN,EAAAA,WAAW,EAAE;AACXd,IAAAA,QAAQ,EAAE,EADC;AAEXqB,IAAAA,UAAU,EAAE;AAFD,GA/CA;AAmDbN,EAAAA,iBAAiB,EAAE;AACjBO,IAAAA,SAAS,EAAE,SADM;AAEjBD,IAAAA,UAAU,EAAE;AAFK,GAnDN;AAuDb9B,EAAAA,SAAS,EAAE;AACTY,IAAAA,KAAK,EAAE;AADE;AAvDE,CAAf;AA4DA,eAAezE,iBAAf","sourcesContent":["import { Dispatch, SetStateAction, useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Module, Review } from \"../types\";\nimport bookmarkApi from \"../api/bookmark\";\nimport plannedModApi from \"../api/planned-mod\";\nimport reactionApi from \"../api/reaction\";\nimport {\n  updatedPersonalPlannedModules,\n  updatePersonalBookmarks,\n  triggerRequireLoginMessage,\n} from \"../utils/helpers\";\n\nimport ModuleSmallDetail from \"../components/ModuleSmallDetail\";\nimport UserClockIcon from \"../icons/UserClockIcon\";\nimport CoinsFilledIcon from \"../icons/CoinsFilledIcon\";\nimport HourGlassHalfFilledIcon from \"../icons/HourGlassHalfFilledIcon\";\nimport LayerGroupIcon from \"../icons/LayerGroupIcon\";\nimport StarFilledIcon from \"../icons/StarFilledIcon\";\nimport LikeFilledIcon from \"../icons/LikeFilledIcon\";\nimport StarOutlinedIcon from \"../icons/StarOutlinedIcon\";\nimport LikeOutlinedIcon from \"../icons/LikeOutlinedIcon\";\nimport UniversityIcon from \"../icons/UniversityIcon\";\nimport BookmarkFilledIcon from \"../icons/BookmarkFilledIcon\";\nimport BookmarkOutlinedIcon from \"../icons/BookmarkOutlinedIcon\";\nimport CheckboxOutlinedIcon from \"../icons/CheckboxOutlinedIcon\";\nimport { BookFilled, BookOutlined } from \"@ant-design/icons\";\nimport PenFilledIcon from \"../icons/PenFilledIcon\";\nimport PencilFilledIcon from \"../icons/PencilFilledIcon\";\nimport Button from \"./Button\";\nimport {\n  codeBlue,\n  reviewBlue,\n  descriptionGreen,\n  ratingsYellow,\n} from \"../styles/colors\";\nimport AddPlannedModModal from \"./AddPlannedModModal\";\nimport { message } from \"antd\";\n\ninterface ModuleInformationProps {\n  module: Module;\n  setAddReviewModalVisibility: Dispatch<SetStateAction<boolean>>;\n  setAddRatingsModalVisibility: Dispatch<SetStateAction<boolean>>;\n  reviewByUser?: Review;\n  updateModule: () => void;\n}\n\nconst ModuleInformation: React.FC<ModuleInformationProps> = ({\n  module,\n  setAddReviewModalVisibility,\n  setAddRatingsModalVisibility,\n  reviewByUser,\n  updateModule\n}) => {\n  const [\n    isAddPlannedModModalVisible,\n    setAddPlannedModModalVisibility,\n  ] = useState(false);\n  const [likeReactionId, setLikeReactionId] = useState(\"\"); // is true if it is reaction's id\n\n  const userId = useSelector((state) => state.auth.user?._id);\n  const bookmarkId = useSelector(\n    (state) => state.personalModules.bookmarks\n  ).find((bookmark) => bookmark.modId === module?._id)?._id;\n  const plannedModId = useSelector(\n    (state) => state.personalModules.plannedMods\n  ).find((plannedMod) => plannedMod.modId === module?._id)?._id;\n  const schools = useSelector((state) => state.schools);\n  const isLoggedIn = useSelector((state) => state.auth.isLoggedIn);\n\n  const {\n    code,\n    workload = 10,\n    rating,\n    schoolId,\n    description,\n    title,\n    credit = 4,\n    semester = [1, 2],\n    prereqs,\n    _id,\n  } = module;\n  const university = schools.find((school) => school._id === schoolId)?.name;\n  const difficulty = rating?.difficulty?.value || 0;\n  const star = rating?.star?.value || 0;\n\n  useEffect(() => {\n    fetchIsLikedByUser();\n  }, [userId]);\n\n  const fetchIsLikedByUser = async () => {\n    try {\n      const reaction = await reactionApi.getReaction(\n        \"mod\",\n        module._id,\n        userId,\n        \"like\"\n      );\n      setLikeReactionId(reaction._id);\n    } catch (err) {\n      setLikeReactionId(\"\");\n    }\n  };\n\n  const toggleBookmark = async () => {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    if (!bookmarkId) {\n      await bookmarkApi.addBookmark(userId, _id);\n    } else {\n      await bookmarkApi.deleteBookmark(bookmarkId);\n    }\n\n    updatePersonalBookmarks(userId);\n  };\n\n  const togglePlanner = async () => {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    if (!plannedModId) {\n      setAddPlannedModModalVisibility(true);\n    } else {\n      await plannedModApi.removePlannedMod(plannedModId);\n      updatedPersonalPlannedModules(userId);\n    }\n  };\n\n  const toggleAddRatingsModal = () => {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    if (reviewByUser) {\n      message.error(\n        \"You have posted a Review before. Edit your Review instead!\"\n      );\n      return;\n    }\n\n    setAddRatingsModalVisibility(true);\n  };\n\n  const toggleAddReviewModal = () => {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n    setAddReviewModalVisibility(true);\n  };\n\n  const toggleLike = async () => {\n    if (!isLoggedIn) {\n      triggerRequireLoginMessage();\n      return;\n    }\n\n    if (likeReactionId) {\n      await reactionApi.deleteReaction(likeReactionId);\n    } else {\n      await reactionApi.addReaction(\"mod\", module._id, userId, \"like\");\n    }\n    fetchIsLikedByUser();\n    updateModule();\n  };\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.moduleMeta}>\n        <div style={styles.moduleInformation}>\n          <div style={styles.moduleCode}>{code}</div>\n          <div style={styles.moduleSmallDetailsColumn}>\n            <ModuleSmallDetail\n              Icon={UniversityIcon}\n              text={`University: ${university ?? \"-\"}`}\n              iconStyle={styles.iconStyle}\n            />\n            <ModuleSmallDetail\n              Icon={HourGlassHalfFilledIcon}\n              text={`Semester(s) offered: ${semester.sort().join(\", \") || \"-\"}`}\n              iconStyle={styles.iconStyle}\n            />\n          </div>\n          <div style={styles.moduleSmallDetailsColumn}>\n            <ModuleSmallDetail\n              Icon={CoinsFilledIcon}\n              text={`Credit: ${credit}`}\n              iconStyle={styles.iconStyle}\n            />\n            <ModuleSmallDetail\n              Icon={UserClockIcon}\n              text={`Workload/Week: ${workload} hours`}\n              iconStyle={styles.iconStyle}\n            />\n          </div>\n          <div style={styles.moduleSmallDetailsColumn}>\n            <ModuleSmallDetail\n              Icon={CheckboxOutlinedIcon}\n              text={`Pre-reqs: ${prereqs.join(\", \") || \"None\"}`}\n              iconStyle={styles.iconStyle}\n            />\n            <ModuleSmallDetail\n              Icon={LayerGroupIcon}\n              text={`Difficulty: ${\n                difficulty.toFixed(1) == \"0.0\" ? \"-\" : difficulty.toFixed(1)\n              }/5`}\n              iconStyle={styles.iconStyle}\n            />\n          </div>\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"space-between\",\n            alignContent: \"center\",\n            height: \"100%\",\n            fontSize: 14,\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"flex-end\",\n              padding: \"10px 10px 10px 0px\",\n              width: \"100%\",\n              color: \"#838383\",\n            }}\n          >\n            <div style={{ marginRight: 10 }}>\n              <LikeOutlinedIcon\n                style={{\n                  height: 20,\n                  color: reviewBlue,\n                  margin: \"0px 10px\",\n                  position: \"relative\",\n                  bottom: -2,\n                }}\n              />\n              {`${module.reaction?.like?.count ?? 0}`}\n            </div>\n            <div>\n              <StarFilledIcon\n                style={{\n                  height: 20,\n                  color: ratingsYellow,\n                  margin: \"0px 10px\",\n                  position: \"relative\",\n                  bottom: -2,\n                }}\n              />\n              {`${star.toFixed(1)}`}\n            </div>\n          </div>\n\n          <div style={styles.actionsBar}>\n            <Button onClick={toggleLike}>\n              {likeReactionId ? (\n                <LikeFilledIcon\n                  style={{\n                    ...styles.actionIcon,\n                    color: reviewBlue,\n                    fontSize: 25,\n                  }}\n                />\n              ) : (\n                <LikeOutlinedIcon\n                  style={{\n                    ...styles.actionIcon,\n                    color: reviewBlue,\n                    fontSize: 25,\n                  }}\n                />\n              )}\n            </Button>\n            <Button onClick={togglePlanner}>\n              {plannedModId ? (\n                <BookFilled\n                  style={{\n                    ...styles.actionIcon,\n                    color: \"#76CCB7\",\n                    fontSize: 25,\n                  }}\n                />\n              ) : (\n                <BookOutlined\n                  style={{\n                    ...styles.actionIcon,\n                    color: \"#76CCB7\",\n                    fontSize: 25,\n                  }}\n                />\n              )}\n            </Button>\n            <Button onClick={toggleBookmark}>\n              {bookmarkId ? (\n                <BookmarkFilledIcon\n                  style={{ ...styles.actionIcon, color: \"#289FA7\" }}\n                />\n              ) : (\n                <BookmarkOutlinedIcon\n                  style={{ ...styles.actionIcon, color: \"#289FA7\" }}\n                />\n              )}\n            </Button>\n            <Button onClick={toggleAddRatingsModal}>\n              <StarOutlinedIcon\n                style={{ ...styles.actionIcon, color: ratingsYellow }}\n              />\n            </Button>\n            <Button style={{ backgroundColor: \"blue\" }} onClick={toggleAddReviewModal}>\n              <PencilFilledIcon\n                style={{ ...styles.actionIcon, color: \"#7497CC\" }}\n              />\n            </Button>\n          </div>\n        </div>\n      </div>\n      <div style={styles.infoContainer}>\n        <div style={styles.moduleTitle}>{title}</div>\n        <div style={styles.moduleDescription}>{description}</div>\n      </div>\n      <AddPlannedModModal\n        isModalVisible={isAddPlannedModModalVisible}\n        setModalVisibility={setAddPlannedModModalVisibility}\n        modId={_id}\n        userId={userId}\n        plannedModId={plannedModId}\n      />\n    </div>\n  );\n};\n\nconst styles = {\n  container: {\n    fontFamily: \"Roboto\",\n    marginTop: 30,\n  },\n  moduleMeta: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    height: 80,\n  },\n  moduleInformation: {\n    display: \"flex\",\n    justifyContent: \"flex-start\",\n  },\n  moduleCode: {\n    backgroundColor: codeBlue,\n    height: 80,\n    borderRadius: 12,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: \"26px\",\n    color: \"white\",\n    padding: \"0px 30px\",\n    boxShadow: \"0px 4px 4px rgba(0, 0, 0, 0.25)\",\n  },\n  moduleSmallDetailsColumn: {\n    display: \"flex\",\n    flexDirection: \"column\" as \"column\",\n    justifyContent: \"space-between\",\n  },\n  actionsBar: {\n    display: \"flex\",\n  },\n  actionIcon: {\n    height: 25,\n    margin: \"0px 10px\",\n  },\n  infoContainer: {\n    backgroundColor: descriptionGreen,\n    marginTop: 10,\n    borderRadius: 15,\n    padding: \"20px 30px 30px 30px\",\n    color: \"#fff\",\n    boxShadow: \"0px 8px 8px rgba(0, 0, 0, 0.25)\",\n  },\n  moduleTitle: {\n    fontSize: 30,\n    fontWeight: \"bold\" as \"bold\",\n  },\n  moduleDescription: {\n    textAlign: \"justify\" as \"justify\",\n    fontWeight: 300,\n  },\n  iconStyle: {\n    color: \"#B9B9B9\",\n  },\n};\n\nexport default ModuleInformation;\n"]},"metadata":{},"sourceType":"module"}