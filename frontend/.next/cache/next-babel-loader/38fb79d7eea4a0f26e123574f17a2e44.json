{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/zhangxian/Desktop/RottenMods/frontend/components/ProfileButton.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Button, Menu, Dropdown } from \"antd\";\nimport { UserOutlined } from '@ant-design/icons';\nimport \"../styles/antd.less\";\nimport { useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from 'react';\nimport LoginModal from \"./LoginModal\";\nimport SignupModal from \"./SignupModal\";\nimport { reviewBlue } from \"../styles/colors\";\nimport CustomButton from \"./Button\";\nimport authService from '../services/authentication';\nimport { useDispatch } from \"react-redux\";\n\nvar ProfileButton = function ProfileButton() {\n  _s();\n\n  var _useState = useState(false),\n      loginModalVisible = _useState[0],\n      setLoginModalVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      signupModalVisible = _useState2[0],\n      setSignupModalVisible = _useState2[1];\n\n  var isLoggedIn = useSelector(function (state) {\n    return state.auth.isLoggedIn;\n  });\n  var user = useSelector(function (state) {\n    return state.auth.user;\n  });\n  var router = useRouter();\n  var dispatch = useDispatch();\n  useEffect(function () {\n    isLoggedIn ? setLoginModalVisible(false) : null; // console.log(\"the user is \");\n    // console.log(user);\n  });\n\n  var toggleLoginModal = function toggleLoginModal() {\n    setLoginModalVisible(!loginModalVisible);\n  };\n\n  var toggleSignupModal = function toggleSignupModal() {\n    setSignupModalVisible(!signupModalVisible);\n  };\n\n  var switchModals = function switchModals() {\n    setSignupModalVisible(!signupModalVisible);\n    setLoginModalVisible(!loginModalVisible);\n  };\n\n  var navigateToProfilePage = function navigateToProfilePage() {\n    router.push({\n      pathname: \"/profile\"\n    });\n  };\n\n  function handleMenuClick(e) {\n    console.log('click', e);\n  }\n\n  var menu = __jsx(Menu, {\n    onClick: handleMenuClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, __jsx(Menu.Item, {\n    key: \"1\",\n    icon: __jsx(UserOutlined, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 32\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"1st menu item\"), __jsx(Menu.Item, {\n    key: \"2\",\n    icon: __jsx(UserOutlined, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 32\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"2nd menu item\"), __jsx(Menu.Item, {\n    key: \"3\",\n    icon: __jsx(UserOutlined, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 32\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, \"3rd menu item\")); // return isAuthenticated ? <div>Logout</div> : <button>Login</button>;\n\n\n  return __jsx(React.Fragment, null, isLoggedIn ? __jsx(React.Fragment, null, __jsx(Dropdown, {\n    onClick: navigateToProfilePage,\n    overlay: menu,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, __jsx(CustomButton, {\n    style: styles.container,\n    onClick: navigateToProfilePage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, user.fullName)), __jsx(Button, {\n    type: \"primary\",\n    onClick: function onClick() {\n      return authService.logOut(dispatch);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"Logout\")) : __jsx(Button, {\n    type: \"primary\",\n    onClick: toggleLoginModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Log In\"), loginModalVisible && !isLoggedIn ? __jsx(LoginModal, {\n    toggles: {\n      toggleLoginModal: toggleLoginModal,\n      switchModals: switchModals\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 43\n    }\n  }) : null, signupModalVisible ? __jsx(SignupModal, {\n    toggles: {\n      toggleSignupModal: toggleSignupModal,\n      switchModals: switchModals\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }) : null);\n};\n\n_s(ProfileButton, \"IvtxjI0U1P+Ejmql0w+rHXr+7+U=\", false, function () {\n  return [useSelector, useSelector, useRouter, useDispatch];\n});\n\n_c = ProfileButton;\nvar styles = {\n  container: {\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: \"0px 10px\",\n    padding: 10,\n    backgroundColor: reviewBlue,\n    color: \"#fff\",\n    borderRadius: 8\n  },\n  userName: {\n    alignItems: \"flex-end\",\n    paddingLeft: \"10px\",\n    margin: 0,\n    fontSize: 15\n  }\n};\nexport default ProfileButton;\n{\n  /* <UserOutlined\n          style={{ fontSize: 25, color: \"#B9B9B9\", marginLeft: 15 }}\n        /> */\n  // style={{\n  //   position: \"relative\",\n  //   top: -1.5,\n  //   fontSize: 19,\n  //   borderWidth: 0,\n  //   marginLeft: 10,\n  //   backgroundColor: \"#fff\",\n  // }}\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileButton\");","map":{"version":3,"sources":["/Users/zhangxian/Desktop/RottenMods/frontend/components/ProfileButton.tsx"],"names":["Button","Menu","Dropdown","UserOutlined","useSelector","useRouter","useEffect","useState","LoginModal","SignupModal","reviewBlue","CustomButton","authService","useDispatch","ProfileButton","loginModalVisible","setLoginModalVisible","signupModalVisible","setSignupModalVisible","isLoggedIn","state","auth","user","router","dispatch","toggleLoginModal","toggleSignupModal","switchModals","navigateToProfilePage","push","pathname","handleMenuClick","e","console","log","menu","styles","container","fullName","logOut","display","alignItems","margin","padding","backgroundColor","color","borderRadius","userName","paddingLeft","fontSize"],"mappings":"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","sourcesContent":["import { Button, Menu, Dropdown } from \"antd\";\nimport { UserOutlined} from '@ant-design/icons';\n\nimport \"../styles/antd.less\";\n\nimport { useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\n\nimport { useEffect, useState } from 'react';\nimport LoginModal from \"./LoginModal\";\nimport SignupModal from \"./SignupModal\";\nimport { reviewBlue } from \"../styles/colors\";\nimport { User } from \"../types\";\nimport CustomButton from \"./Button\";\nimport authService from '../services/authentication';\nimport { useDispatch } from \"react-redux\";\n\n\n\nconst ProfileButton: React.FC = () => {\n  const [loginModalVisible, setLoginModalVisible] = useState(false);\n  const [signupModalVisible, setSignupModalVisible] = useState(false);\n  const isLoggedIn: boolean = useSelector(state => state.auth.isLoggedIn);\n  const user: User = useSelector(state => state.auth.user);\n\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n\n  useEffect(() => {\n    isLoggedIn ? setLoginModalVisible(false) : null;\n    // console.log(\"the user is \");\n    // console.log(user);\n  })\n\n  const toggleLoginModal = () => {\n    setLoginModalVisible(!loginModalVisible);\n  }\n\n  const toggleSignupModal = () => {\n    setSignupModalVisible(!signupModalVisible);\n  }\n\n  const switchModals = () => {\n    setSignupModalVisible(!signupModalVisible);\n    setLoginModalVisible(!loginModalVisible);\n  }\n\n  const navigateToProfilePage = () => {\n    router.push({\n      pathname: \"/profile\",\n    })\n  }\n\n  function handleMenuClick(e) {\n    console.log('click', e);\n  }\n\n  const menu = (\n    <Menu onClick={handleMenuClick}>\n      <Menu.Item key=\"1\" icon={<UserOutlined />}>\n        1st menu item\n      </Menu.Item>\n      <Menu.Item key=\"2\" icon={<UserOutlined />}>\n        2nd menu item\n      </Menu.Item>\n      <Menu.Item key=\"3\" icon={<UserOutlined />}>\n        3rd menu item\n      </Menu.Item>\n    </Menu>\n  );\n\n\n  \n  // return isAuthenticated ? <div>Logout</div> : <button>Login</button>;\n  return (\n    <>\n      {\n        isLoggedIn\n          ? <>\n              <Dropdown onClick={navigateToProfilePage} overlay={menu}>\n                <CustomButton style={styles.container} onClick={navigateToProfilePage}>\n                  {user.fullName}\n                </CustomButton>\n              </Dropdown>\n              <Button type=\"primary\" onClick={() =>authService.logOut(dispatch)}>\n                Logout\n              </Button>\n            </>\n        \n          : <Button type=\"primary\" onClick={toggleLoginModal}>\n            Log In\n          </Button>\n      }\n\n      {loginModalVisible && !isLoggedIn ? <LoginModal toggles={{ toggleLoginModal, switchModals }} /> : null}\n      {signupModalVisible ? <SignupModal toggles={{ toggleSignupModal, switchModals }} /> : null}\n    </>\n\n  );\n};\n\nconst styles = {\n  container: {\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: \"0px 10px\",\n    padding: 10,\n    backgroundColor: reviewBlue,\n    color: \"#fff\",\n    borderRadius: 8\n  },\n  userName: {\n    alignItems: \"flex-end\",\n    paddingLeft: \"10px\",\n    margin: 0,\n    fontSize: 15\n  }\n}\n\nexport default ProfileButton;\n\n{\n  /* <UserOutlined\n          style={{ fontSize: 25, color: \"#B9B9B9\", marginLeft: 15 }}\n        /> */\n  // style={{\n  //   position: \"relative\",\n  //   top: -1.5,\n  //   fontSize: 19,\n  //   borderWidth: 0,\n  //   marginLeft: 10,\n  //   backgroundColor: \"#fff\",\n  // }}\n}\n"]},"metadata":{},"sourceType":"module"}