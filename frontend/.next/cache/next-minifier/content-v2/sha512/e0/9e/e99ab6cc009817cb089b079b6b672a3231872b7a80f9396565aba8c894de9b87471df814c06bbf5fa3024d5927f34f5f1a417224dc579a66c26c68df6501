{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{\"3Pwz\":function(e,t,a){\"use strict\";var n=a(\"rePB\"),r=a(\"q1tI\"),i=a.n(r),o=a(\"xQut\"),c=a(\"xwfA\"),s=i.a.createElement;function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={seeMoreButtonContainer:{display:\"flex\",justifyContent:\"center\"},seeMoreButton:{backgroundColor:c.h,boxShadow:\"0px 8px 8px rgba(0, 0, 0, 0.25)\",padding:12,borderRadius:10,color:\"#fff\"}};t.a=function(e){var t=e.style,a=e.fetchMoreData;return s(\"div\",{style:d.seeMoreButtonContainer},s(o.a,{onClick:a,style:u(u({},d.seeMoreButton),t)},\"See More\"))}},\"8Skl\":function(e,t,a){\"use strict\";var n=a(\"q1tI\"),r={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z\"}}]},name:\"down\",theme:\"outlined\"},i=a(\"6VBw\"),o=function(e,t){return n.createElement(i.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName=\"DownOutlined\";t.a=n.forwardRef(o)},Q3Rx:function(e,t,a){\"use strict\";var n=a(\"wx14\"),r=a(\"q1tI\"),i=a.n(r).a.createElement;t.a=function(e){return i(\"svg\",Object(n.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"bookmark\",className:\"bookmark-solid_svg__svg-inline--fa bookmark-solid_svg__fa-bookmark bookmark-solid_svg__fa-w-12\",viewBox:\"0 0 384 512\"},e),i(\"path\",{fill:\"currentColor\",d:\"M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z\"}))}},Vfi8:function(e,t,a){\"use strict\";var n=a(\"wx14\"),r=a(\"q1tI\"),i=a.n(r).a.createElement;t.a=function(e){return i(\"svg\",Object(n.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"pen-alt\",className:\"pen-alt-solid_svg__svg-inline--fa pen-alt-solid_svg__fa-pen-alt pen-alt-solid_svg__fa-w-16\",viewBox:\"0 0 512 512\"},e),i(\"path\",{fill:\"currentColor\",d:\"M497.94 74.17l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.75 18.75-49.15 0-67.91zm-246.8-20.53c-15.62-15.62-40.94-15.62-56.56 0L75.8 172.43c-6.25 6.25-6.25 16.38 0 22.62l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l101.82-101.82 22.63 22.62L93.95 290.03A327.038 327.038 0 00.17 485.11l-.03.23c-1.7 15.28 11.21 28.2 26.49 26.51a327.02 327.02 0 00195.34-93.8l196.79-196.79-82.77-82.77-84.85-84.85z\"}))}},W6yM:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),r={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zM668 345.9L621.5 312 572 347.4V124h96v221.9z\"}}]},name:\"book\",theme:\"filled\"},i=a(\"6VBw\"),o=function(e,t){return n.createElement(i.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName=\"BookFilled\";t.a=n.forwardRef(o)},im0w:function(e,t,a){\"use strict\";a.r(t);var n=a(\"o0o1\"),r=a.n(n),i=a(\"HaE+\"),o=a(\"q1tI\"),c=a.n(o),s=a(\"/MKj\"),l=a(\"xQNW\"),u=a(\"jBY8\"),d=a(\"vDqi\"),f=a.n(d),v=a(\"cr+I\"),p=a.n(v),b=a(\"rOcY\"),g=\"\".concat(b.a,\"/api/event\"),y={addEvent:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n,i){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(g,{userId:t,sub:a,subId:n,type:i});case 2:return o=e.sent,e.abrupt(\"return\",o.data);case 4:case\"end\":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),getEvent:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n,i){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.a.stringify({sub:t,subId:a,userId:n,type:i}),e.next=3,f.a.get(\"\".concat(g,\"/?\").concat(o));case 3:return c=e.sent,e.abrupt(\"return\",c.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),deleteEvent:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete(g,{params:{sub:t,subId:a,userId:n,type:i}});case 2:case\"end\":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},m=a(\"ye7r\"),h=a(\"0lvd\"),x=a(\"HNwB\"),w=a(\"xwfA\"),O=a(\"tsqr\"),_=c.a.createElement,j=new Date,k=j.getFullYear()%2e3,M=1===(j.getMonth()<6?2:1)?k+1:k,C={text:\"\",ratingIds:[],workload:10,semesterTaken:\"\",acadYearTaken:\"\".concat(M-1,\"/\").concat(M)},S=function(e){var t=e.code,a=e.module,n=e.updateReviews,c=e.updateModule,l=e.isModalVisible,d=e.setModalVisibility,f=e.reviewByUser,v=e.ratingsByUser,p=null!==f&&void 0!==f?f:C,b=Object(o.useState)(p.text),g=b[0],y=b[1],j=Object(o.useState)(3),k=j[0],M=j[1],S=Object(o.useState)(3),I=S[0],V=S[1],B=Object(o.useState)(p.semesterTaken),z=B[0],E=B[1],P=Object(o.useState)(p.acadYearTaken),R=P[0],D=P[1],L=Object(s.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id}));console.log(a),Object(o.useEffect)((function(){var e=null===f||void 0===f?void 0:f.ratingIds;(null===e||void 0===e?void 0:e.length)>0&&Object(m.a)(e,V,M)}),[]),Object(o.useEffect)((function(){f&&(y(f.text),E(f.semesterTaken),D(f.acadYearTaken))}),[f]);var N=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=3;break}return O.b.error(\"You need to fill in all fields!\"),e.abrupt(\"return\");case 3:if(t={text:g,semesterTaken:z,acadYearTaken:R,modId:a._id,userId:L,ratings:[{type:\"difficulty\",value:k},{type:\"star\",value:I}]},!f){e.next=10;break}return e.next=7,u.a.updateReviewOfModule(t,f._id);case 7:n(),e.next=15;break;case 10:if(!v){e.next=13;break}return e.next=13,u.a.deleteRating(v._id);case 13:return e.next=15,u.a.addReviewOfModule(t);case 15:d(!1),n(),c();case 18:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){return 0!==I&&0!==k&&\"\"!==g.trim()};return _(h.a,{backgroundColor:w.h,submitColor:w.i,title:\"\".concat(f?\"Edit\":\"Add\",\" Review\"),isModalVisible:l,setModalVisibility:function(e){d(e)},onSubmit:N},_(x.a,{label:\"Module Code\",type:\"text\",value:t}),_(x.a,{label:\"Review\",type:\"textarea\",value:g,setValue:y}),_(x.a,{label:\"Year Taken\",type:\"annualYear\",value:R,setValue:D}),_(x.a,{label:\"Semester Taken\",type:\"semester\",value:z,options:a.semester,setValue:E}),_(x.a,{label:\"Difficulty\",type:\"difficulty\",value:k,setValue:M}),_(x.a,{label:\"Ratings\",type:\"rate\",value:I,setValue:V}))},I=c.a.createElement,V=function(e){var t,a=e.code,n=e.modId,c=e.ratingsByUser,l=e.isModalVisible,d=e.setModalVisibility,f=e.updateModule,v=e.checkIsRatedByUser,p=Object(s.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),b=Object(o.useState)(null!==(t=null===c||void 0===c?void 0:c.value)&&void 0!==t?t:3),g=b[0],y=b[1],m=Object(o.useState)(\"Submit\"),_=m[0],j=m[1],k=Object(o.useState)(w.i),M=k[0],C=k[1];Object(o.useEffect)((function(){var e;y(null!==(e=null===c||void 0===c?void 0:c.value)&&void 0!==e?e:0)}),[c]);var S=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V()){e.next=3;break}return O.b.error(\"You need to rate the module first!\"),e.abrupt(\"return\");case 3:if(!c){e.next=8;break}return e.next=6,u.a.updateRating(g,\"star\",p,n,\"mod\",c._id);case 6:e.next=10;break;case 8:return e.next=10,u.a.addRating(g,\"star\",p,n,\"mod\");case 10:v(),f(),d(!1);case 13:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){return 0!==g};return I(h.a,{backgroundColor:w.h,submitColor:M,title:\"Rate the Module\",isModalVisible:l,setModalVisibility:function(e){d(e),C(w.i),j(\"Submit\")},onSubmit:S,submitText:_},I(x.a,{label:\"Module Code\",type:\"text\",value:a}),I(x.a,{label:\"Ratings\",type:\"rate\",value:g,setValue:y}))},B=a(\"BvKs\"),z=a(\"jsC+\"),E=a(\"8Skl\"),P=a(\"rePB\"),R=a(\"elgY\"),D=a(\"yRN5\"),L=c.a.createElement;function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H={container:{display:\"flex\",marginLeft:20,padding:\"10px 0px\"},iconContainer:{display:\"flex\",justifyContent:\"center\",width:26},text:{marginLeft:10,color:\"#838383\",textOverflow:\"ellipsis\"}},T=function(e){var t=e.Icon,a=e.text,n=e.iconStyle;return L(\"div\",{style:H.container},L(\"div\",{style:H.iconContainer},L(t,{style:q({height:20},n)})),L(\"span\",{style:H.text},a))},A=a(\"wx14\"),Y=c.a.createElement;var F=function(e){return Y(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"user-clock\",className:\"user-clock-solid_svg__svg-inline--fa user-clock-solid_svg__fa-user-clock user-clock-solid_svg__fa-w-20\",viewBox:\"0 0 640 512\"},e),Y(\"path\",{fill:\"currentColor\",d:\"M496 224c-79.6 0-144 64.4-144 144s64.4 144 144 144 144-64.4 144-144-64.4-144-144-144zm64 150.3c0 5.3-4.4 9.7-9.7 9.7h-60.6c-5.3 0-9.7-4.4-9.7-9.7v-76.6c0-5.3 4.4-9.7 9.7-9.7h12.6c5.3 0 9.7 4.4 9.7 9.7V352h38.3c5.3 0 9.7 4.4 9.7 9.7v12.6zM320 368c0-27.8 6.7-54.1 18.2-77.5-8-1.5-16.2-2.5-24.6-2.5h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h347.1c-45.3-31.9-75.1-84.5-75.1-144zm-96-112c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128z\"}))},U=c.a.createElement;var W=function(e){return U(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"coins\",className:\"coins-solid_svg__svg-inline--fa coins-solid_svg__fa-coins coins-solid_svg__fa-w-16\",viewBox:\"0 0 512 512\"},e),U(\"path\",{fill:\"currentColor\",d:\"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z\"}))},Q=c.a.createElement;var K=function(e){return Q(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"hourglass-half\",className:\"hourglass-half-solid_svg__svg-inline--fa hourglass-half-solid_svg__fa-hourglass-half hourglass-half-solid_svg__fa-w-12\",viewBox:\"0 0 384 512\"},e),Q(\"path\",{fill:\"currentColor\",d:\"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z\"}))},J=c.a.createElement;var X=function(e){return J(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"layer-group\",className:\"layer-group-solid_svg__svg-inline--fa layer-group-solid_svg__fa-layer-group layer-group-solid_svg__fa-w-16\",viewBox:\"0 0 512 512\"},e),J(\"path\",{fill:\"currentColor\",d:\"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 00-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z\"}))},G=a(\"j1SK\"),Z=c.a.createElement,$=function(e){return Z(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"far\",\"data-icon\":\"star\",className:\"star-regular_svg__svg-inline--fa star-regular_svg__fa-star star-regular_svg__fa-w-18\",viewBox:\"0 0 576 512\"},e),Z(\"path\",{fill:\"currentColor\",d:\"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z\"}))},ee=c.a.createElement;var te=function(e){return ee(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"university\",className:\"university-solid_svg__svg-inline--fa university-solid_svg__fa-university university-solid_svg__fa-w-16\",viewBox:\"0 0 512 512\"},e),ee(\"path\",{fill:\"currentColor\",d:\"M496 128v16a8 8 0 01-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 01-8-8v-16a8 8 0 014.941-7.392l232-88a7.996 7.996 0 016.118 0l232 88A8 8 0 01496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 008 8h464a8 8 0 008-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z\"}))},ae=a(\"Q3Rx\"),ne=c.a.createElement;var re=function(e){return ne(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"far\",\"data-icon\":\"bookmark\",className:\"bookmark-regular_svg__svg-inline--fa bookmark-regular_svg__fa-bookmark bookmark-regular_svg__fa-w-12\",viewBox:\"0 0 384 512\"},e),ne(\"path\",{fill:\"currentColor\",d:\"M336 0H48C21.49 0 0 21.49 0 48v464l192-112 192 112V48c0-26.51-21.49-48-48-48zm0 428.43l-144-84-144 84V54a6 6 0 016-6h276c3.314 0 6 2.683 6 5.996V428.43z\"}))},ie=c.a.createElement;var oe=function(e){return ie(\"svg\",Object(A.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"far\",\"data-icon\":\"check-square\",className:\"check-square-regular_svg__svg-inline--fa check-square-regular_svg__fa-check-square check-square-regular_svg__fa-w-14\",viewBox:\"0 0 448 512\"},e),ie(\"path\",{fill:\"currentColor\",d:\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm0 400H48V80h352v352zm-35.864-241.724L191.547 361.48c-4.705 4.667-12.303 4.637-16.97-.068l-90.781-91.516c-4.667-4.705-4.637-12.303.069-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l59.792 60.277 141.352-140.216c4.705-4.667 12.303-4.637 16.97.068l22.536 22.718c4.667 4.706 4.637 12.304-.068 16.971z\"}))},ce=a(\"W6yM\"),se={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z\"}}]},name:\"book\",theme:\"outlined\"},le=a(\"6VBw\"),ue=function(e,t){return o.createElement(le.a,Object.assign({},e,{ref:t,icon:se}))};ue.displayName=\"BookOutlined\";var de=o.forwardRef(ue),fe=a(\"Vfi8\"),ve=a(\"xQut\"),pe=c.a.createElement,be=function(e){var t=e.userId,a=e.modId,n=e.plannedModId,c=e.isModalVisible,s=e.setModalVisibility,l=Object(o.useState)(1),u=l[0],d=l[1],f=Object(o.useState)(1),v=f[0],p=f[1],b=function(){var e=Object(i.a)(r.a.mark((function e(){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=2*(u-1)+v,!n){e.next=6;break}return e.next=4,D.a.updatePlannedMod(n,t,a,i);case 4:e.next=8;break;case 6:return e.next=8,D.a.addPlannedMod(t,a,i);case 8:Object(m.e)(t),s(!1);case 10:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return pe(h.a,{title:\"Add to Study Planner\",backgroundColor:w.f,isModalVisible:c,setModalVisibility:s,submitColor:w.i,onSubmit:b},pe(x.a,{label:\"Year\",type:\"year\",value:u,setValue:d}),pe(x.a,{label:\"Semester\",type:\"semester\",value:v,setValue:p}))},ge=c.a.createElement;function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={container:{fontFamily:\"Roboto\",marginTop:30},moduleMeta:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",height:80},moduleInformation:{display:\"flex\",justifyContent:\"flex-start\"},moduleCode:{backgroundColor:w.a,height:80,borderRadius:12,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",fontSize:\"26px\",color:\"white\",padding:\"0px 30px\",boxShadow:\"0px 4px 4px rgba(0, 0, 0, 0.25)\"},moduleSmallDetailsColumn:{display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\"},actionsBar:{display:\"flex\"},actionIcon:{height:25,margin:\"0px 10px\"},infoContainer:{backgroundColor:w.e,marginTop:10,borderRadius:15,padding:\"20px 30px 30px 30px\",color:\"#fff\",boxShadow:\"0px 8px 8px rgba(0, 0, 0, 0.25)\"},moduleTitle:{fontSize:30,fontWeight:\"bold\"},moduleDescription:{textAlign:\"justify\",fontWeight:300},iconStyle:{color:\"#B9B9B9\"}},xe=function(e){var t,a,n,c,l,u=e.module,d=e.setAddReviewModalVisibility,f=e.setAddRatingsModalVisibility,v=e.reviewByUser,p=Object(o.useState)(!1),b=p[0],g=p[1],y=Object(s.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),h=null===(t=Object(s.c)((function(e){return e.personalModules.bookmarks})).find((function(e){return e.modId===(null===u||void 0===u?void 0:u._id)})))||void 0===t?void 0:t._id,x=null===(a=Object(s.c)((function(e){return e.personalModules.plannedMods})).find((function(e){return e.modId===(null===u||void 0===u?void 0:u._id)})))||void 0===a?void 0:a._id,_=Object(s.c)((function(e){return e.schools})),j=Object(s.c)((function(e){return e.auth.isLoggedIn})),k=u.code,M=u.workload,C=void 0===M?10:M,S=u.rating,I=u.schoolId,V=u.description,B=u.title,z=u.credit,E=void 0===z?4:z,P=u.semester,L=void 0===P?[1,2]:P,N=u.prereqs,q=u._id,H=null===(n=_.find((function(e){return e._id===I})))||void 0===n?void 0:n.name,A=(null===S||void 0===S?void 0:null===(c=S.difficulty)||void 0===c?void 0:c.value)||0,Y=(null===S||void 0===S?void 0:null===(l=S.star)||void 0===l?void 0:l.value)||0,U=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return Object(m.b)(),e.abrupt(\"return\");case 3:if(h){e.next=8;break}return e.next=6,R.a.addBookmark(y,q);case 6:e.next=10;break;case 8:return e.next=10,R.a.deleteBookmark(h);case 10:Object(m.c)(y);case 11:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return Object(m.b)(),e.abrupt(\"return\");case 3:if(x){e.next=7;break}g(!0),e.next=10;break;case 7:return e.next=9,D.a.removePlannedMod(x);case 9:Object(m.e)(y);case 10:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return ge(\"div\",{style:he.container},ge(\"div\",{style:he.moduleMeta},ge(\"div\",{style:he.moduleInformation},ge(\"div\",{style:he.moduleCode},k),ge(\"div\",{style:he.moduleSmallDetailsColumn},ge(T,{Icon:te,text:\"University: \".concat(null!==H&&void 0!==H?H:\"-\"),iconStyle:he.iconStyle}),ge(T,{Icon:K,text:\"Semester(s) offered: \".concat(L.sort().join(\", \")||\"-\"),iconStyle:he.iconStyle})),ge(\"div\",{style:he.moduleSmallDetailsColumn},ge(T,{Icon:W,text:\"Credit: \".concat(E),iconStyle:he.iconStyle}),ge(T,{Icon:F,text:\"Workload/Week: \".concat(C,\" hours\"),iconStyle:he.iconStyle})),ge(\"div\",{style:he.moduleSmallDetailsColumn},ge(T,{Icon:oe,text:\"Pre-reqs: \".concat(N.join(\", \")||\"None\"),iconStyle:he.iconStyle}),ge(T,{Icon:X,text:\"Difficulty: \".concat(\"0.0\"==A.toFixed(1)?\"-\":A.toFixed(1),\"/5\"),iconStyle:he.iconStyle}))),ge(\"div\",{style:{display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",alignContent:\"center\",height:\"100%\",fontSize:14}},ge(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",padding:\"10px 10px 10px 0px\",width:\"100%\",color:\"#838383\"}},ge(\"div\",null,ge(G.a,{style:{height:20,color:w.g,margin:\"0px 10px\"}})),\"\".concat(Y.toFixed(1))),ge(\"div\",{style:he.actionsBar},ge(ve.a,{onClick:Q},ge(x?ce.a:de,{style:me(me({},he.actionIcon),{},{color:\"#76CCB7\",fontSize:25})})),ge(ve.a,{onClick:U},ge(h?ae.a:re,{style:me(me({},he.actionIcon),{},{color:\"#289FA7\"})})),ge(ve.a,{onClick:function(){j?v?O.b.error(\"You have posted a Review before. Edit your Review instead!\"):f(!0):Object(m.b)()}},ge($,{style:me(me({},he.actionIcon),{},{color:w.g})})),ge(ve.a,{onClick:function(){j?d(!0):Object(m.b)()}},ge(fe.a,{style:me(me({},he.actionIcon),{},{color:\"#7497CC\"})}))))),ge(\"div\",{style:he.infoContainer},ge(\"div\",{style:he.moduleTitle},B),ge(\"div\",{style:he.moduleDescription},V)),ge(be,{isModalVisible:b,setModalVisibility:g,modId:q,userId:y,plannedModId:x}))},we=a(\"zmtl\"),Oe=a(\"3Pwz\"),_e=c.a.createElement,je=function(e,t){return new Date(e.createdAt)<new Date(t.createdAt)?1:-1},ke=function(e){var t=e.initialModule,a=e.reviews,n=Object(o.useState)(t),d=n[0],f=n[1],v=Object(o.useState)(a),p=v[0],b=v[1],g=Object(o.useState)(20),m=g[0],h=g[1],x=Object(o.useState)(!1),w=x[0],O=x[1],_=Object(o.useState)(!1),j=_[0],k=_[1],M=Object(o.useState)(null),C=M[0],I=M[1],P=Object(o.useState)(\"Latest\"),R=P[0],D=P[1],L=Object(s.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),N=p.find((function(e){return e.userId===L}));Object(o.useEffect)((function(){T(),y.addEvent(L,\"mod\",d._id,\"view\")}),[]);var q=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getReviewsOfModule(d._id);case 2:t=e.sent,\"Latest\"===R?t.sort(je):\"Oldest\"===R?t.sort(A):\"Most Likes\"===R&&t.sort(Y),b(t);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getModule(d._id);case 2:(t=e.sent).prereqs=d.prereqs,f(t);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.getRating(\"mod\",d._id,L,\"star\");case 3:t=e.sent,I(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(null);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),A=function(e,t){return new Date(e.createdAt)>new Date(t.createdAt)?1:-1},Y=function(e,t){var a,n,r,i,o,c,s=null!==(a=null===(n=e.reaction)||void 0===n?void 0:null===(r=n.like)||void 0===r?void 0:r.count)&&void 0!==a?a:0;return(null!==(i=null===(o=t.reaction)||void 0===o?void 0:null===(c=o.like)||void 0===c?void 0:c.count)&&void 0!==i?i:0)-s},F=function(e,t){D(t);var a=p.concat([]);a.sort(e),b(a)},U=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getReviewsOfModule(d._id);case 2:t=e.sent,b(t),h(m+10);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=_e(B.a,null,_e(B.a.Item,null,_e(ve.a,{onClick:function(){return F(je,\"Latest\")}},\"Latest\")),_e(B.a.Item,null,_e(ve.a,{onClick:function(){return F(A,\"Oldest\")}},\"Oldest\")),_e(B.a.Item,null,_e(ve.a,{onClick:function(){return F(Y,\"Most Likes\")}},\"Most Likes\")));return d?_e(c.a.Fragment,null,_e(xe,{module:d,setAddReviewModalVisibility:O,setAddRatingsModalVisibility:k,reviewByUser:N}),_e(\"div\",{style:Me.reviewsHeader},_e(\"span\",{style:Me.reviewsHeaderTitle},\"Reviews\"),_e(z.a,{overlay:W},_e(\"div\",{style:{marginRight:20}},_e(\"a\",{style:{color:\"#595959\",marginRight:6,fontSize:18}},R),_e(E.a,null)))),_e(we.a,{updateReviews:q,reviews:p}),p.length>=10&&_e(Oe.a,{fetchMoreData:U}),_e(S,{code:d.code,module:d,updateReviews:q,isModalVisible:w,setModalVisibility:O,reviewByUser:N,updateModule:H,ratingsByUser:C}),_e(V,{code:d.code,modId:d._id,isModalVisible:j,setModalVisibility:k,ratingsByUser:C,updateModule:H,checkIsRatedByUser:T})):_e(\"div\",{style:Me.moduleNotFoundPage},_e(\"span\",{style:{}},\"Module not found!\"))},Me={reviewsHeader:{height:\"8vh\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:\"0px 10px\",fontFamily:\"Mukta\",color:\"#838383\"},reviewsHeaderTitle:{fontSize:\"26px\"},moduleNotFoundPage:{display:\"flex\",height:\"80vh\",width:\"100%\",justifyContent:\"center\",alignItems:\"center\"}};ke.getInitialProps=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,n,o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,n=a.id,e.prev=2,e.next=5,l.a.getModule(n);case 5:return o=e.sent,e.next=8,Promise.all(o.prereqs.map(function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.getModule(t);case 2:return a=e.sent,e.abrupt(\"return\",a.code);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return c=e.sent,o.prereqs=c,e.next=12,u.a.getReviewsOfModule(o._id,10);case 12:return(s=e.sent).sort(je),e.abrupt(\"return\",{initialModule:o,reviews:s});case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt(\"return\",{initialModule:null,reviews:[]});case 20:case\"end\":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();t.default=ke},j1SK:function(e,t,a){\"use strict\";var n=a(\"wx14\"),r=a(\"q1tI\"),i=a.n(r).a.createElement;t.a=function(e){return i(\"svg\",Object(n.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"star\",className:\"star-solid_svg__svg-inline--fa star-solid_svg__fa-star star-solid_svg__fa-w-18\",viewBox:\"0 0 576 512\"},e),i(\"path\",{fill:\"currentColor\",d:\"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z\"}))}},y71F:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/module-review\",function(){return a(\"im0w\")}])}},[[\"y71F\",1,2,0,4,5,7,6,10,9,12,8]]]);","extractedComments":[]}