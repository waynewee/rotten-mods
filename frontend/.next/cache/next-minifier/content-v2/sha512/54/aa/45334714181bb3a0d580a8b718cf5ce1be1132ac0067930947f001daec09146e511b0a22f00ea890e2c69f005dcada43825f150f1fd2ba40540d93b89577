{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{ph7Q:function(e,t,n){\"use strict\";var r=n(\"o0o1\"),a=n.n(r),c=n(\"HaE+\"),i=n(\"vDqi\"),o=n.n(i),s=n(\"rOcY\"),u=\"\".concat(s.a,\"/api/user\"),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(\"\".concat(u,\"/\").concat(t));case 2:return n=e.sent,e.abrupt(\"return\",n.data);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"the user received is\"),console.log(t),e.next=4,o.a.put(\"\".concat(u,\"/\").concat(n),t,{withCredentials:!0});case 4:return r=e.sent,console.log(\"the update response\"),console.log(r),e.abrupt(\"return\",r.data);case 8:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a={getUser:l,updateUser:p}},w5JA:function(e,t,n){e.exports={commentModal:\"commentModal___lxxH9\"}},zmtl:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=n.n(r),c=n(\"rePB\"),i=n(\"o0o1\"),o=n.n(i),s=n(\"HaE+\"),u=n(\"/MKj\"),l=n(\"vDqi\"),p=n.n(l),d=n(\"cr+I\"),f=n.n(d),v=n(\"rOcY\"),m=\"\".concat(v.a,\"/api/reply\"),b={addComment:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(m,{userId:t,text:n,reviewId:r},{withCredentials:!0});case 2:case\"end\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getCommentsOfReview:function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.stringify({reviewId:t}),e.next=3,p.a.get(\"\".concat(m,\"/?\").concat(n));case 3:return r=e.sent,e.abrupt(\"return\",r.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=\"\".concat(v.a,\"/api/reaction\"),x={addReaction:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(h,{sub:t,subId:n,userId:r,type:a},{withCredentials:!0});case 2:case\"end\":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),getReaction:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,a){var c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=f.a.stringify({sub:t,subId:n,userId:r,type:a}),e.next=3,p.a.get(\"\".concat(h,\"/?\").concat(c));case 3:return i=e.sent,e.abrupt(\"return\",i.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),deleteReaction:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete(\"\".concat(h,\"/\").concat(t));case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=n(\"ye7r\"),y=n(\"0lvd\"),g=n(\"HNwB\"),O=n(\"xwfA\"),j=n(\"tsqr\"),C=a.a.createElement,k=function(e){var t=e.isModalVisible,n=e.setModalVisibility,a=e.reviewId,c=e.fetchComments,i=Object(r.useState)(\"\"),l=i[0],p=i[1],d=Object(r.useState)(\"Submit\"),f=d[0],v=d[1],m=Object(r.useState)(O.i),h=m[0],x=m[1],w=Object(u.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),k=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_()){e.next=3;break}return j.b.error(\"The comment field cannot be empty!\"),e.abrupt(\"return\");case 3:return e.next=5,b.addComment(w,l,a);case 5:p(\"\"),v(\"Submit\"),x(O.i),n(!1),c();case 10:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){return\"\"!==l.trim()};return C(y.a,{title:\"Add Comment\",backgroundColor:O.b,isModalVisible:t,setModalVisibility:function(e){n(e),x(O.i),v(\"Submit\")},submitColor:h,onSubmit:k,submitText:f},C(g.a,{label:\"Comment\",type:\"textarea\",value:l,setValue:p}))},_=n(\"xQut\"),S=n(\"w5JA\"),I=n.n(S),M=n(\"ph7Q\"),E=a.a.createElement,R={container:{backgroundColor:O.b,borderRadius:10,width:\"100%\",padding:15,boxShadow:\"0px 8px 8px rgba(0, 0, 0, 0.25)\",marginTop:20},header:{marginBottom:10},comment:{}},V=function(e){var t=e.comment,n=Object(r.useState)(\"\"),a=n[0],c=n[1];Object(r.useEffect)((function(){i()}),[]);var i=function(){var e=Object(s.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getUser(t.userId);case 2:n=e.sent,c(n.name);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return E(\"div\",{style:R.container},E(\"div\",{style:R.header},a),E(\"div\",{style:R.comment},t.text))},B=n(\"uUid\"),A=n(\"9rZX\"),P=n.n(A),z=a.a.createElement,T={overlay:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",backgroundColor:\"rgba(232, 232, 232, 0.5)\"},content:{position:\"static\",width:600,color:\"#fff\",borderRadius:15,borderWidth:0,boxShadow:\"0px 8px 8px rgba(0, 0, 0, 0.25)\",padding:\"30px 30px 20px 30px\",backgroundColor:O.h},header:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",fontSize:25,marginBottom:10,padding:\"0px 10px\"},closeButton:{color:\"#fff\",transform:\"scale(0.8)\",cursor:\"pointer\"}},D=function(e){var t=e.comments,n=e.isModalVisible,r=e.setModalVisibility;return z(P.a,{isOpen:n,style:{overlay:T.overlay,content:T.content}},z(\"div\",{style:T.header},z(\"span\",null,\"Comments\"),z(\"div\",{onClick:function(){return r(!1)}},z(B.a,{style:T.closeButton}))),z(\"div\",{className:I.a.commentModal,style:{maxHeight:\"70vh\",overflowY:\"scroll\",padding:10}},0===t.length?z(a.a.Fragment,null,\"No comments yet. You can be the first!\"):t.map((function(e,t){return z(V,{comment:e,key:t})}))))},H=n(\"wx14\"),N=a.a.createElement;var Y=function(e){return N(\"svg\",Object(H.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"far\",\"data-icon\":\"comments\",className:\"comments-regular_svg__svg-inline--fa comments-regular_svg__fa-comments comments-regular_svg__fa-w-18\",viewBox:\"0 0 576 512\"},e),N(\"path\",{fill:\"currentColor\",d:\"M532 386.2c27.5-27.1 44-61.1 44-98.2 0-80-76.5-146.1-176.2-157.9C368.3 72.5 294.3 32 208 32 93.1 32 0 103.6 0 192c0 37 16.5 71 44 98.2-15.3 30.7-37.3 54.5-37.7 54.9-6.3 6.7-8.1 16.5-4.4 25 3.6 8.5 12 14 21.2 14 53.5 0 96.7-20.2 125.2-38.8 9.2 2.1 18.7 3.7 28.4 4.9C208.1 407.6 281.8 448 368 448c20.8 0 40.8-2.4 59.8-6.8C456.3 459.7 499.4 480 553 480c9.2 0 17.5-5.5 21.2-14 3.6-8.5 1.9-18.3-4.4-25-.4-.3-22.5-24.1-37.8-54.8zm-392.8-92.3L122.1 305c-14.1 9.1-28.5 16.3-43.1 21.4 2.7-4.7 5.4-9.7 8-14.8l15.5-31.1L77.7 256C64.2 242.6 48 220.7 48 192c0-60.7 73.3-112 160-112s160 51.3 160 112-73.3 112-160 112c-16.5 0-33-1.9-49-5.6l-19.8-4.5zM498.3 352l-24.7 24.4 15.5 31.1c2.6 5.1 5.3 10.1 8 14.8-14.6-5.1-29-12.3-43.1-21.4l-17.1-11.1-19.9 4.6c-16 3.7-32.5 5.6-49 5.6-54 0-102.2-20.1-131.3-49.7C338 339.5 416 272.9 416 192c0-3.4-.4-6.7-.7-10C479.7 196.5 528 238.8 528 288c0 28.7-16.2 50.6-29.7 64z\"}))},q=a.a.createElement;var F=function(e){return q(\"svg\",Object(H.a)({\"aria-hidden\":\"true\",\"data-prefix\":\"far\",\"data-icon\":\"thumbs-up\",className:\"thumbs-up-regular_svg__svg-inline--fa thumbs-up-regular_svg__fa-thumbs-up thumbs-up-regular_svg__fa-w-16\",viewBox:\"0 0 512 512\"},e),q(\"path\",{fill:\"currentColor\",d:\"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z\"}))},J=a.a.createElement;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={container:{padding:30,backgroundColor:O.h,color:\"#fff\",borderRadius:15,boxShadow:\"0px 8px 8px rgba(0, 0, 0, 0.25)\",marginBottom:15,width:\"100%\"},header:{display:\"flex\",justifyContent:\"space-between\"},userInformation:{display:\"flex\",flexWrap:\"wrap\"},actionsBar:{display:\"flex\"},action:{display:\"flex\",justifyContent:\"center\"},icon:{height:20,marginRight:10},review:{marginTop:10,textAlign:\"justify\"},divider:{margin:\"0px 10px\"}},W=function(e){var t,n,a=e.review,c=e.updateReviews,i=e.showActions,l=void 0===i||i,p=Object(r.useState)(!1),d=p[0],f=p[1],v=Object(r.useState)(!1),m=v[0],h=v[1],y=Object(r.useState)([]),g=y[0],j=y[1],C=Object(r.useState)(\"\"),S=C[0],I=C[1],M=Object(r.useState)(3),E=M[0],R=M[1],V=Object(r.useState)(3),B=V[0],A=V[1],P=Object(u.c)((function(e){return e.auth.isLoggedIn})),z=Object(u.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),T=a.user,H=a.text,N=a.acadYearTaken,q=a.semesterTaken,L=a.reaction,W=a._id,K=a.ratingIds,X=null===T||void 0===T?void 0:T.name,Z=null!==(t=null===L||void 0===L?void 0:null===(n=L.like)||void 0===n?void 0:n.count)&&void 0!==t?t:0;Object(r.useEffect)((function(){G()}),[]),Object(r.useEffect)((function(){$()}),[z]),Object(r.useEffect)((function(){Object(w.a)(K,A,R)}),[K]);var G=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getCommentsOfReview(W);case 2:t=e.sent,j(t);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getReaction(\"review\",W,z,\"like\");case 3:t=e.sent,I(t._id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(\"\");case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=3;break}return Object(w.b)(),e.abrupt(\"return\");case 3:if(S){e.next=10;break}return e.next=6,x.addReaction(\"review\",W,z,\"like\");case 6:c(),$(),e.next=14;break;case 10:return e.next=12,x.deleteReaction(S);case 12:c(),$();case 14:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return J(\"div\",{style:Q.container},J(\"div\",{style:Q.header},J(\"div\",{style:Q.userInformation},J(\"span\",null,X),J(\"span\",{style:Q.divider},\"|\"),J(\"span\",null,\"AY\",N,\", Sem \",q),J(\"span\",{style:Q.divider},\"|\"),J(\"span\",null,\"Difficulty: \",E.toFixed(1)),J(\"span\",{style:Q.divider},\"|\"),J(\"span\",null,\"Rating: \",B.toFixed(1))),l&&J(\"div\",{style:Q.actionsBar},J(\"div\",{style:Q.action},J(_.a,{onClick:ee},J(F,{style:U(U({},Q.icon),{},{color:S?O.g:\"#fff\"})})),J(\"span\",null,\"\".concat(Z,\" Likes\"))),J(\"span\",{style:{margin:\"0px 10px\"}},\"|\"),J(\"div\",{style:Q.action},J(_.a,{onClick:function(){P?h(!0):Object(w.b)()}},J(Y,{style:Q.icon})),J(_.a,{onClick:function(){return f(!0)}},\"\".concat(g.length,\" Comments\"))))),J(\"div\",{style:Q.review},H),J(k,{fetchComments:G,reviewId:W,isModalVisible:m,setModalVisibility:h}),J(D,{comments:g,isModalVisible:d,setModalVisibility:f}))},K=a.a.createElement;t.a=function(e){var t=e.reviews,n=void 0===t?[]:t,r=e.updateReviews,c=e.showActions;return K(a.a.Fragment,null,0!==n.length?n.map((function(e){return K(W,{review:e,key:e._id,updateReviews:r,showActions:c})})):K(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:50}},\"There are no reviews yet!\"))}}}]);","extractedComments":[]}